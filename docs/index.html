<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width" charset="utf-8">
    <title>o-livefyre-comment-client</title>
    <link rel="stylesheet" href="http://getbootstrap.com/2.3.2/assets/css/bootstrap.css">
    <link rel="stylesheet" href="http://getbootstrap.com/2.3.2/assets/css/bootstrap-responsive.css">
    <link rel="stylesheet" href="http://getbootstrap.com/2.3.2/assets/css/docs.css">
    <style>
      body > .navbar .brand {
        float:left;
        text-shadow: rgba(255, 255, 255, 0.0980392) 0px 1px 0px, rgba(255, 255, 255, 0.4) 0px 0px 30px;
        color: white;
        margin-left:0px;
        font-weight:normal;
      }
      
      .bs-docs-sidenav.affix {
        box-shadow: 0 0 20px 1px rgba(0, 0, 0, 0.5);
        z-index: 10;
      }
      
      .bs-docs-sidenav i{
        width: 8px;
        height: 8px;
        padding: 0px;
        margin: 0px;
        display: inline-block;
        margin-right:0.5em;
      }
      
      .bs-docs-sidenav > li > a {
          word-wrap: break-word;
      }
      
      .bs-docs-sidenav > li:first-child > a {
        border-top-right-radius: 6px;
        border-top-left-radius: 6px;
      }
      
      code[class*="language-"],pre[class*="language-"]{color:black;text-shadow:0 1px white;font-family:Consolas,Monaco,'Andale Mono',monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*="language-"]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*="language-"],pre[class*="language-"]{background:#f5f2f0}:not(pre)>code[class*="language-"]{padding:.1em;border-radius:.3em}.token.comment,.token.prolog,.token.doctype,.token.cdata{color:slategray}.token.punctuation{color:#999}.namespace{opacity:.7}.token.property,.token.tag,.token.boolean,.token.number{color:#905}.token.selector,.token.attr-name,.token.string{color:#690}.token.operator,.token.entity,.token.url,.language-css .token.string,.style .token.string{color:#a67f59;background:hsla(0,0%,100%,.5)}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.regex,.token.important{color:#e90}.token.important{font-weight:bold}.token.entity{cursor:help}
      div.description {margin: 14px 0; padding-top: 14px; border-bottom:1px solid #eee; }
      .tags {}
      .ctx-type {
        display:inline-block;
        margin-right:0.5em;
        //- float:right; margin-top:8px
      }
      
      footer iframe{vertical-align:middle;}
      
    </style>
  </head>
  <body data-spy="scroll" data-target=".scrollspy">
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container"><a class="brand">Doxx</a>
          <div class="nav-collapse collapse">
            <ul class="nav pull-right sponsored"></ul>
          </div>
        </div>
      </div>
    </div>
    <header id="overview" class="jumbotron subhead">
      <div class="container">
        <h1>o-livefyre-comment-client</h1>
        <p class="lead"></p>
      </div>
    </header>
    <div class="container">
      <div class="row">
        <div class="span3 bs-docs-sidebar">
          <ul class="nav nav-list bs-docs-sidenav affix-top">
            <li class="active"><a href="index.html">Main</a></li>
            <li><a href="auth.js.html">auth.js</a></li>
            <li><a href="config.js.html">config.js</a></li>
            <li><a href="globalEvents.js.html">globalEvents.js</a></li>
            <li><a href="i18n.js.html">i18n.js</a></li>
            <li><a href="main.js.html">main.js</a></li>
            <li><a href="resourceLoader.js.html">resourceLoader.js</a></li>
            <li><a href="userDialogs.js.html">userDialogs.js</a></li>
            <li><a href="utils.js.html">utils.js</a></li>
            <li><a href="Widget.js.html">Widget.js</a></li>
            <li><a href="WidgetUi.js.html">WidgetUi.js</a></li>
          </ul>
          <div class="scrollspy">
            <ul class="nav nav-list bs-docs-sidenav affix-top">
            </ul>
          </div>
        </div>
        <div class="span9">
          <section id="Main"><h1 id="o-livefyre-comment-client">o-livefyre-comment-client</h1>
<p>Integration of the commenting widget provided by Livefyre.</p>
<hr>
<h2 id="how-to-use-it">How to use it</h2>
<p>There are two ways of using this module:</p>
<h3 id="build-tool">Build tool</h3>
<p>Include the script provided by the build tool.<br>The script exposes a global variable named <code>oLivefyreCommentClient</code>.</p>
<h3 id="bower">Bower</h3>
<p>As a bower dependency:</p>
<pre><code class="lang-javascript">var oLivefyreCommentClient = require(&#39;o-livefyre-comment-client&#39;);</code></pre>
<p>The module should be built using <code>browserify</code> (with <code>debowerify</code> transform).</p>
<hr>
<h2 id="configuration">Configuration</h2>
<p><strong>The methods which are meant to configure the module are the following:</strong></p>
<h3 id="init">init</h3>
<p>This method is responsible for changing the default configuration used by this module. Calling this method with an object will merge the default configuration with the object specified (deep merge, primitive type values of the same key will be overwritten).</p>
<p>In order to use this module with authentication enabled, you should specify the user&#39;s session ID:</p>
<pre><code class="lang-javascript">oLivefyreCommentClient.init({
    sessionId: &#39;sessID&#39;
});</code></pre>
<h5 id="default-configuration">Default configuration</h5>
<pre><code class="lang-javascript">{
    &quot;livefyre&quot;: {
        &quot;network&quot;: &quot;ft.fyre.co&quot;,
        &quot;domain&quot;: &quot;ft.auth.fyre.co&quot;,
        &quot;resourceDomainBase&quot;: &quot;http://zor.livefyre.com&quot;
    },
    &quot;resourceUrls&quot;: {
        &quot;livefyreJs&quot;: &quot;/wjs/v3.0/javascripts/livefyre.js&quot;
    }
}</code></pre>
<h5 id="change-the-environment">Change the environment</h5>
<p>In order to change to the TEST environment, use the following code:</p>
<pre><code class="lang-javascript">oLivefyreCommentClient.init({
    &quot;livefyre&quot;: {
        &quot;network&quot;: &quot;ft-1.fyre.co&quot;,
        &quot;domain&quot;: &quot;ft-1.auth.fyre.co&quot;,
        &quot;resourceDomainBase&quot;: &quot;http://zor.livefyre.com&quot;
    },
    dependencies: {
        &quot;o-comment-data&quot;: {
            &quot;suds&quot;: {
                &quot;baseUrl&quot;: &quot;http://test.session-user-data.webservices.ft.com&quot;
            },
            &quot;ccs&quot;: {
                &quot;baseUrl&quot;: &quot;http://test.comment-creation-service.webservices.ft.com&quot;
            },
            &quot;cacheConfig&quot;: {
                &quot;authBaseName&quot;: &quot;comments-test-auth-&quot;,
                &quot;initBaseName&quot;: &quot;comments-test-init-&quot;
            }
        }
    }
});</code></pre>
<hr>
<h2 id="integration">Integration</h2>
<p>This integration considers that you have included the script using one of the methods mentioned in the <code>How to use it</code> section.</p>
<p>The following functions are used only for purpose of illustration, but they are not available as part of this module:</p>
<ul>
<li>readCookie</li>
<li>login</li>
</ul>
<p><strong>Common steps:</strong></p>
<p>Read the user&#39;s session:</p>
<pre><code class="lang-javascript">var userSession = readCookie(&#39;FTSession&#39;);</code></pre>
<p>Set the user&#39;s session if one is available:</p>
<pre><code class="lang-javascript">oLivefyreCommentClient.init({
    sessionId: userSession
});</code></pre>
<p>Listen on the &#39;login required&#39; event, and try to log in the user within the page:</p>
<pre><code class="lang-javascript">oLivefyreCommentClient.auth.on(&#39;loginRequired.authAction&#39;, function (delegate) {
    // the user is not logged in, but an action was performed within the comment widget that requires the user to be logged in

    login();
    if (loggedIn) {
        delegate.success();
    } else if (loginRefused) {
        delegate.failure();
    } else if (loginFailure) {
        delegate.failure();
    }
});</code></pre>
<p><strong>Important: if the log in needs a page reload, don&#39;t call the failure function!</strong></p>
<p>Listen the events the widget triggers (optional):</p>
<pre><code class="lang-javascript">widgetInstance.on(commentPosted.tracking, function (siteId, eventData) {
    // a comment is posted, do something, track it
});</code></pre>
<h3 id="integration-programatically">Integration - programatically</h3>
<p>Create an instance of the Widget with the parameters that are available:</p>
<pre><code class="lang-javascript">var widgetInstance = new oLivefyreCommentClient.Widget({
    elId: &#39;container-id&#39;,
    title: document.title,
    url: document.location.href,
    articleId: &#39;ID-of-the-article&#39;,
    initExtension: {
        datetimeFormat: {
            minutesUntilAbsoluteTime: -1,
            absoluteFormat: &#39;MMM dd hh:mm a&#39;
        }
    }
});</code></pre>
<p>Load the widget:</p>
<pre><code class="lang-javascript">widgetInstance.load();</code></pre>
<h3 id="integration-using-dom-element">Integration - using DOM element</h3>
<p>The Widget will be created using data from a DOM element.</p>
<p>Include this where you want the widget to load:</p>
<pre><code class="lang-html">&lt;div class=&quot;o-livefyre-comment-client&quot; id=&quot;commentWidget&quot; data-o-livefyre-comment-client-autoconstruct=&quot;true&quot; data-o-livefyre-comment-client-config-title=&quot;title-of-the-article&quot; data-o-livefyre-comment-client-config-url=&quot;page-url&quot; data-o-livefyre-comment-client-config-articleId=&quot;ID-of-the-article&quot;&gt;&lt;/div&gt;</code></pre>
<p>In order to build the DOM element, follow the steps:</p>
<ol>
<li>Add class o-livefyre-comment-client to the container element</li>
<li>Add attribute <code>data-o-livefyre-comment-client-autoconstruct=&quot;true&quot;</code></li>
<li>Specify a unique ID</li>
<li>Add configuration options that you want to pass to the widget in the following form: data-o-livefyre-comment-client-{configName}=&quot;{configValue}&quot;. Replace <code>{configName}</code> and <code>{configValue}</code> with the name of the configuration and value you want to pass.</li>
</ol>
<p>When done with the configuration of the widget, adding event listeners, etc.:</p>
<pre><code class="lang-javascript">oLivefyreCommentClient.initDomConstruct();</code></pre>
<p><strong>You don&#39;t have to wait until the document is fully loaded, call it whenever you are done with the configurations.</strong></p>
<p>If you need a reference of the JavaScript object created, you can find it the following way:</p>
<pre><code class="lang-javascript">window[&#39;o-livefyre-comment-client-widget-&#39; + id]</code></pre>
<p>where id is the ID of the DOM element (in this example <code>commentWidget</code>).</p>
<hr>
<h2 id="more-about-the-submodules">More about the submodules</h2>
<h3 id="widget">Widget</h3>
<p>In order to load comments on a page, you should create an instance of <code>Widget</code>.</p>
<pre><code class="lang-javascript">var widgetInstance = new oLivefyreCommentClient.Widget({
    elId: &#39;commentWrapper&#39;,
    articleId: &#39;post12315&#39;,
    url: &#39;http://www.example.com/post12315&#39;,
    title: &#39;Test comments&#39;
});

widgetInstance.on(&#39;loginRequired.authAction&#39;, function (delegate) {
    // Login is required, handle the login process.
    if (delegate) {
        if (loginSuccessful) {
            delegate.success();
        } else {
            delegate.failure();
        }
    }
}
});

widgetInstance.load();</code></pre>
<h5 id="configuration">Configuration</h5>
<p>To create an instance, you will need to provide a configuration object. This should have the following structure:</p>
<h6 id="mandatory-fields-">Mandatory fields:</h6>
<ul>
<li>elId: ID of the HTML element in which the widget should be loaded</li>
<li>articleId: ID of the article, any string</li>
<li>url: canonical URL of the page</li>
<li>title: Title of the page</li>
</ul>
<h6 id="optional-fields-">Optional fields:</h6>
<ul>
<li>authPageReload: true or false. True if the login process reloads the page. Default value is false.</li>
<li>emailAlert: if a user has not yet saved the email preferences, an alert is shown after each post. This flag can have true/false values meaning if the email alert should be shown or not. The default value is true.</li>
<li>stream_type: livecomments, livechat, liveblog</li>
<li>initExtension: object which contains key-value pairs which should be added to the init object</li>
<li>stringOverrides: key-value pairs which override default Livefyre strings</li>
<li>timeout: time in seconds which when exceeded an &quot;unable to load&quot; message is displayed. Default value is 15.</li>
</ul>
<h5 id="methods">Methods</h5>
<h6 id="load">load</h6>
<p>This method loads the Widget on the page.</p>
<h5 id="events">Events</h5>
<p>You can listen to the events using the <code>on</code> method, which works similar to the one in jQuery.</p>
<pre><code class="lang-javascript">widgetInstance.on(&#39;nameOfTheEvent&#39;, function () {
    // event handler
});</code></pre>
<p>Using the <code>off</code> method event handlers can be removed.</p>
<p>The list of events are:</p>
<h6 id="timeout-widget">timeout.widget</h6>
<p>Triggered when loading the widget exceeded a given time.</p>
<h6 id="error-resources">error.resources</h6>
<p>Triggered when the necessary resource files (e.g. Livefyre&#39;s core JS library) couldn&#39;t be loaded.</p>
<h6 id="error-init">error.init</h6>
<p>Triggered when the initialization process ended up with errors.</p>
<h6 id="error-widget">error.widget</h6>
<p>Triggered when any error appear (triggered together with the above mentioned error events).</p>
<h6 id="loaded-init">loaded.init</h6>
<p>Init object is loaded. The handler receives as a parameter the object.</p>
<h6 id="loaded-auth">loaded.auth</h6>
<p>The first time the auth object is loaded, it is broadcasted using this event. The handler receives as a parameter the object.</p>
<h6 id="ready-widget">ready.widget</h6>
<p>The widget is ready to be loaded, the initialization process has finished.</p>
<h6 id="loaded-widget">loaded.widget</h6>
<p>The Livefyre widget has loaded the necessary data and created a <code>Livefyre widget</code> instance, but not yet rendered it. The handler receives the Livefyre widget object as a parameter.</p>
<h6 id="initialrendercomplete-widget">initialRenderComplete.widget</h6>
<p>The widget is rendered, the DOM is populated with the elements of the widget.</p>
<h6 id="commentposted-tracking">commentPosted.tracking</h6>
<p>A comment is posted.<br>Arguments of the handler: siteId, eventData, where eventData has the following structure:</p>
<pre><code class="lang-javascript">{
  authorId: &quot;_u2012@livefyre.com&quot; // The ID of the Author of the comment 
  parent: &quot;893549&quot; // The ID of the comment that this new comment is in reply to, else null
  bodyHtml: &quot;&lt;p&gt;42&lt;/p&gt;&quot; // The HTML of the submitted Content
  sharedToFacebook: true // Whether the comment was also posted to Facebook
  sharedToTwitter: false // Whether the comment was also posted to Twitter
}</code></pre>
<h6 id="commentliked-tracking">commentLiked.tracking</h6>
<p>A comment is recommended.<br>Arguments of the handler: siteId, eventData, where eventData has the following structure:</p>
<pre><code class="lang-javascript">{
  targetId: &quot;245625&quot; // The ID of the comment that was liked
  targetAuthorId: &quot;i_am_author@livefyre.com&quot; // The ID of the author of the comment that was liked
}</code></pre>
<h6 id="commentshared-tracking">commentShared.tracking</h6>
<p>A comment is shared.<br>Arguments of the handler: siteId, eventData, where eventData has the following structure:</p>
<pre><code class="lang-javascript">{
  targetId: &quot;256255&quot; // The ID of the comment that was shared
  sharedToFacebook: false // Whether the comment was shared to Facebook
  sharedToTwitter: true // Whether the comment was shared to Twitter
}</code></pre>
<h6 id="socialmention-tracking">socialMention.tracking</h6>
<p>A user sent a social mention through a comment.<br>Arguments of the handler: siteId, eventData, where eventData has the following structure:</p>
<pre><code class="lang-javascript">{
  id: &#39;111111@fb.gw.livefyre.com&#39; // ID of the mentioned user
  displayName: &#39;testUser&#39; // Display name of mentioned user
  message: &quot;@testUser Wow, I can&#39;t believe it either!&quot; // Message that was sent to the particular user
  provider: &#39;twitter&#39; // Provider to which the mention was shared
}</code></pre>
<h6 id="loginrequired-authaction">loginRequired.authAction</h6>
<p>Triggered when the user tries to post a comment without being logged in, or simply the user clicks the sign in link without being logged in (or with session expired, but it&#39;s up to the product to handle this case).</p>
<p>The cases when the user is logged in but doesn&#39;t have a pseudonym is automatically covered.</p>
<h6 id="logout-authaction">logout.authAction</h6>
<p>Triggered when the user logs out.</p>
<h3 id="auth">auth</h3>
<p>This module is handling the authentication into the Livefyre system.</p>
<h5 id="methods">Methods</h5>
<h6 id="getauthdelegate">getAuthDelegate</h6>
<p>Creates Livefyre RemoteAuthDelegate, also provides login and logout into Livefyre.<br>See <a href="http://docs.livefyre.com/developers/user-auth/remote-profiles/#BuildingAuthDelegate">http://docs.livefyre.com/developers/user-auth/remote-profiles/#BuildingAuthDelegate</a></p>
<h6 id="login">login</h6>
<p>Logs in a livefyre user.</p>
<h6 id="logout">logout</h6>
<h6 id="on">on</h6>
<h6 id="off">off</h6>
<h3 id="userdialogs">userDialogs</h3>
<h3 id="resourceloader">resourceLoader</h3>
<p>This is responsible for loading Livefyre&#39;s core JS libraries, and it also provides a helper to load CSS override.</p>
<h5 id="methods-">Methods:</h5>
<h6 id="loadlivefyrecore">loadLivefyreCore</h6>
<h6 id="loadcssoverrides">loadCssOverrides</h6>
<h3 id="i18n">i18n</h3>
<p>It exposes the following objects:</p>
<h5 id="lfstringoverride">lfStringOverride</h5>
<p>Contains FT preferred string overrides for the default Livefyre Comments widget.</p>
<h5 id="messages">messages</h5>
<p>Contains several custom messages, e.g. error messages</p>
<h3 id="utils">utils</h3>
<p>Contains helper functions.</p>
<p>Methods that are available:</p>
<h5 id="emptylivefyreactionqueue">emptyLivefyreActionQueue</h5>
<p>Livefyre creates a queue in localStorage when a user posts a comment without being logged in. This method clears the queue.</p>
<h5 id="ispermalinkpresent">isPermalinkPresent</h5>
<p>Detects if the URL is a Livefyre permalink.</p>
<h5 id="cloneobject">cloneObject</h5>
<p>Deferences a plain Object and returns a deep copy (same content with different references).</p>
<hr>
<h2 id="logging">Logging</h2>
<p>Logging can be enabled for debugging purposes. It logs using the global &#39;console&#39; if available (if not, nothing happens and it degrades gracefully).<br>By default logging is disabled.</p>
<h3 id="enablelogging">enableLogging</h3>
<p>This method enables logging of the module.</p>
<h3 id="disablelogging">disableLogging</h3>
<p>This method disables logging of the module.</p>
<h3 id="setlogginglevel">setLoggingLevel</h3>
<p>This method sets the logging level. This could be a number from 0 to 4 (where 0 is debug, 4 is error), or a string from the available methods of &#39;console&#39; (debug, log, info, warn, error).<br>Default is 3 (warn).</p>
</section>
        </div>
      </div>
    </div>
    <footer class="footer">
      <div class="container">
        <p>Documentation generated with<a href="https://github.com/FGRibreau/doxx">Doxx</a>created by<a href="https://twitter.com/FGRibreau" data-show-count="false" class="twitter-follow-button">Francois-Guillaume Ribreau</a></p>
        <p>Doxx is sponsored by<a href="http://bringr.net/?btt" title="Outil d'analyse des rÃ©seaux sociaux" class="bringr">Bringr</a>and<a href="https://redsmin.com/?btt" title="Full Redis GUI" class="redsmin">Redsmin</a></p>
        <p>Theme borrowed from Twitter Bootstrap</p>
      </div>
    </footer>
    <script src="http://platform.twitter.com/widgets.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>
    <script src="http://leaverou.github.com/prefixfree/prefixfree.js"></script>
    <script src="http://getbootstrap.com/2.3.2/assets/js/bootstrap-transition.js"></script>
    <script src="http://getbootstrap.com/2.3.2/assets/js/bootstrap-scrollspy.js"></script>
    <script src="http://getbootstrap.com/2.3.2/assets/js/bootstrap-dropdown.js"></script>
    <script src="http://getbootstrap.com/2.3.2/assets/js/bootstrap-collapse.js"></script>
    <script src="http://getbootstrap.com/2.3.2/assets/js/bootstrap-affix.js"></script>
    <script>
      /**
       * Prism: Lightweight, robust, elegant syntax highlighting
       * MIT license http://www.opensource.org/licenses/mit-license.php/
       * @author Lea Verou http://lea.verou.me
       */(function(){var e=/\blang(?:uage)?-(?!\*)(\w+)\b/i,t=self.Prism={util:{type:function(e){return Object.prototype.toString.call(e).match(/\[object (\w+)\]/)[1]},clone:function(e){var n=t.util.type(e);switch(n){case"Object":var r={};for(var i in e)e.hasOwnProperty(i)&&(r[i]=t.util.clone(e[i]));return r;case"Array":return e.slice()}return e}},languages:{extend:function(e,n){var r=t.util.clone(t.languages[e]);for(var i in n)r[i]=n[i];return r},insertBefore:function(e,n,r,i){i=i||t.languages;var s=i[e],o={};for(var u in s)if(s.hasOwnProperty(u)){if(u==n)for(var a in r)r.hasOwnProperty(a)&&(o[a]=r[a]);o[u]=s[u]}return i[e]=o},DFS:function(e,n){for(var r in e){n.call(e,r,e[r]);t.util.type(e)==="Object"&&t.languages.DFS(e[r],n)}}},highlightAll:function(e,n){var r=document.querySelectorAll('code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code');for(var i=0,s;s=r[i++];)t.highlightElement(s,e===!0,n)},highlightElement:function(r,i,s){var o,u,a=r;while(a&&!e.test(a.className))a=a.parentNode;if(a){o=(a.className.match(e)||[,""])[1];u=t.languages[o]}if(!u)return;r.className=r.className.replace(e,"").replace(/\s+/g," ")+" language-"+o;a=r.parentNode;/pre/i.test(a.nodeName)&&(a.className=a.className.replace(e,"").replace(/\s+/g," ")+" language-"+o);var f=r.textContent;if(!f)return;f=f.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\u00a0/g," ");var l={element:r,language:o,grammar:u,code:f};t.hooks.run("before-highlight",l);if(i&&self.Worker){var c=new Worker(t.filename);c.onmessage=function(e){l.highlightedCode=n.stringify(JSON.parse(e.data));l.element.innerHTML=l.highlightedCode;s&&s.call(l.element);t.hooks.run("after-highlight",l)};c.postMessage(JSON.stringify({language:l.language,code:l.code}))}else{l.highlightedCode=t.highlight(l.code,l.grammar);l.element.innerHTML=l.highlightedCode;s&&s.call(r);t.hooks.run("after-highlight",l)}},highlight:function(e,r){return n.stringify(t.tokenize(e,r))},tokenize:function(e,n){var r=t.Token,i=[e],s=n.rest;if(s){for(var o in s)n[o]=s[o];delete n.rest}e:for(var o in n){if(!n.hasOwnProperty(o)||!n[o])continue;var u=n[o],a=u.inside,f=!!u.lookbehind||0;u=u.pattern||u;for(var l=0;l<i.length;l++){var c=i[l];if(i.length>e.length)break e;if(c instanceof r)continue;u.lastIndex=0;var h=u.exec(c);if(h){f&&(f=h[1].length);var p=h.index-1+f,h=h[0].slice(f),d=h.length,v=p+d,m=c.slice(0,p+1),g=c.slice(v+1),y=[l,1];m&&y.push(m);var b=new r(o,a?t.tokenize(h,a):h);y.push(b);g&&y.push(g);Array.prototype.splice.apply(i,y)}}}return i},hooks:{all:{},add:function(e,n){var r=t.hooks.all;r[e]=r[e]||[];r[e].push(n)},run:function(e,n){var r=t.hooks.all[e];if(!r||!r.length)return;for(var i=0,s;s=r[i++];)s(n)}}},n=t.Token=function(e,t){this.type=e;this.content=t};n.stringify=function(e){if(typeof e=="string")return e;if(Object.prototype.toString.call(e)=="[object Array]"){for(var r=0;r<e.length;r++)e[r]=n.stringify(e[r]);return e.join("")}var i={type:e.type,content:n.stringify(e.content),tag:"span",classes:["token",e.type],attributes:{}};i.type=="comment"&&(i.attributes.spellcheck="true");t.hooks.run("wrap",i);var s="";for(var o in i.attributes)s+=o+'="'+(i.attributes[o]||"")+'"';return"<"+i.tag+' class="'+i.classes.join(" ")+'" '+s+">"+i.content+"</"+i.tag+">"};if(!self.document){self.addEventListener("message",function(e){var n=JSON.parse(e.data),r=n.language,i=n.code;self.postMessage(JSON.stringify(t.tokenize(i,t.languages[r])));self.close()},!1);return}var r=document.getElementsByTagName("script");r=r[r.length-1];if(r){t.filename=r.src;document.addEventListener&&!r.hasAttribute("data-manual")&&document.addEventListener("DOMContentLoaded",t.highlightAll)}})();;
      Prism.languages.markup={comment:/&lt;!--[\w\W]*?--(&gt;|&gt;)/g,prolog:/&lt;\?.+?\?&gt;/,doctype:/&lt;!DOCTYPE.+?&gt;/,cdata:/&lt;!\[CDATA\[[\w\W]+?]]&gt;/i,tag:{pattern:/&lt;\/?[\w:-]+\s*(?:\s+[\w:-]+(?:=(?:("|')(\\?[\w\W])*?\1|\w+))?\s*)*\/?&gt;/gi,inside:{tag:{pattern:/^&lt;\/?[\w:-]+/i,inside:{punctuation:/^&lt;\/?/,namespace:/^[\w-]+?:/}},"attr-value":{pattern:/=(?:('|")[\w\W]*?(\1)|[^\s>]+)/gi,inside:{punctuation:/=|&gt;|"/g}},punctuation:/\/?&gt;/g,"attr-name":{pattern:/[\w:-]+/g,inside:{namespace:/^[\w-]+?:/}}}},entity:/&amp;#?[\da-z]{1,8};/gi};Prism.hooks.add("wrap",function(e){e.type==="entity"&&(e.attributes.title=e.content.replace(/&amp;/,"&"))});;
      Prism.languages.css={comment:/\/\*[\w\W]*?\*\//g,atrule:/@[\w-]+?(\s+[^;{]+)?(?=\s*{|\s*;)/gi,url:/url\((["']?).*?\1\)/gi,selector:/[^\{\}\s][^\{\}]*(?=\s*\{)/g,property:/(\b|\B)[a-z-]+(?=\s*:)/ig,string:/("|')(\\?.)*?\1/g,important:/\B!important\b/gi,ignore:/&(lt|gt|amp);/gi,punctuation:/[\{\};:]/g};Prism.languages.markup&&Prism.languages.insertBefore("markup","tag",{style:{pattern:/(&lt;|<)style[\w\W]*?(>|&gt;)[\w\W]*?(&lt;|<)\/style(>|&gt;)/ig,inside:{tag:{pattern:/(&lt;|<)style[\w\W]*?(>|&gt;)|(&lt;|<)\/style(>|&gt;)/ig,inside:Prism.languages.markup.tag.inside},rest:Prism.languages.css}}});;
      Prism.languages.clike={comment:{pattern:/(^|[^\\])(\/\*[\w\W]*?\*\/|\/\/.*?(\r?\n|$))/g,lookbehind:!0},string:/("|')(\\?.)*?\1/g,keyword:/\b(if|else|while|do|for|return|in|instanceof|function|new|try|catch|finally|null|break|continue)\b/g,"boolean":/\b(true|false)\b/g,number:/\b-?(0x)?\d*\.?[\da-f]+\b/g,operator:/[-+]{1,2}|!|=?&lt;|=?&gt;|={1,2}|(&amp;){1,2}|\|?\||\?|\*|\//g,ignore:/&(lt|gt|amp);/gi,punctuation:/[{}[\];(),.:]/g};;
      Prism.languages.javascript=Prism.languages.extend("clike",{keyword:/\b(var|let|if|else|while|do|for|return|in|instanceof|function|new|with|typeof|try|catch|finally|null|break|continue)\b/g,number:/\b(-?(0x)?\d*\.?[\da-f]+|NaN|-?Infinity)\b/g});Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:/(^|[^/])\/(?!\/)(\[.+?]|\\.|[^/\r\n])+\/[gim]{0,3}(?=\s*($|[\r\n,.;})]))/g,lookbehind:!0}});Prism.languages.markup&&Prism.languages.insertBefore("markup","tag",{script:{pattern:/(&lt;|<)script[\w\W]*?(>|&gt;)[\w\W]*?(&lt;|<)\/script(>|&gt;)/ig,inside:{tag:{pattern:/(&lt;|<)script[\w\W]*?(>|&gt;)|(&lt;|<)\/script(>|&gt;)/ig,inside:Prism.languages.markup.tag.inside},rest:Prism.languages.javascript}}});;
      
    </script>
    <!-- App js-->
    <script>
      $(function(){
        var $window = $(window);
        $('.scrollspy .nav').affix({
          offset: {
            top: function () { return $window.width() <= 980 ? 480 : 400 }
          , bottom: 50
          }
        });
      })
    </script>
  </body>
</html>