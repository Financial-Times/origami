<!DOCTYPE html><html lang="en-GB" class="core o-typography--loading-sans o-typography--loading-sans-bold o-typography--loading-display o-typography--loading-display-bold" data-o-component="o-typography"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Sass Build Times</title><meta name="description" content="Sass build times got you down? Enable Sass monitoring in your project and let us know."><!-- Cuts the mustard test --><!-- Favicons --><link rel="icon" type="image/svg+xml" href="https://www.ft.com/__origami/service/image/v2/images/raw/ftlogo-v1%3Aorigami?source=origami-docs&format=svg" sizes="any"><link rel="alternate icon" type="image/png" href="https://www.ft.com/__origami/service/image/v2/images/raw/ftlogo-v1%3Aorigami?source=origami-docs&width=16&height=16&format=png" sizes="16x16"><link rel="alternate icon" type="image/png" href="https://www.ft.com/__origami/service/image/v2/images/raw/ftlogo-v1%3Aorigami?source=origami-docs&width=32&height=32&format=png" sizes="32x32"><link rel="alternate icon" type="image/png" href="https://www.ft.com/__origami/service/image/v2/images/raw/ftlogo-v1%3Aorigami?source=origami-docs&width=96&height=96&format=png" sizes="96x96"><link rel="alternate icon" type="image/png" href="https://www.ft.com/__origami/service/image/v2/images/raw/ftlogo-v1%3Aorigami?source=origami-docs&width=128&height=128&format=png" sizes="128x128"><link rel="alternate icon" type="image/png" href="https://www.ft.com/__origami/service/image/v2/images/raw/ftlogo-v1%3Aorigami?source=origami-docs&width=196&height=196&format=png" sizes="196x196"><link rel="alternate icon" type="image/png" href="https://www.ft.com/__origami/service/image/v2/images/raw/ftlogo-v1%3Aorigami?source=origami-docs&width=310&height=310&format=png" sizes="310x310"><!-- Site links --><link rel="sitemap" type="application/xml" href="/sitemap-index.xml" title="Sitemap"><link rel="canonical" href="https://origami.ft.com/blog/2024/01/24/sass-build-times/"><!-- Progressive Font Loading --><!-- https://github.com/Financial-Times/o-typography/tree/v6.1.3#setup-progressive-loading --><!-- Styles --><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="https://www.ft.com/__origami/service/build/v3/bundles/css?components=o-layout@^5.3.2,o-typography@^7.4.1,o-normalise@^3.3.1,o-header-services@^5.3.4,o-footer-services@^4.2.6,o-message@^5.4.2,o-table@^9.3.1,o-autoinit@^3.1.3,o-forms@^9.11.2,o-tracking@^4.5.0,o-colors@^6.6.2,o-spacing@^3.2.3&#38;brand=internal&#38;system_code=origami-website"><!-- JS --><script defer src="https://www.ft.com/__origami/service/build/v3/bundles/js?components=o-layout@^5.3.2,o-typography@^7.4.1,o-normalise@^3.3.1,o-header-services@^5.3.4,o-footer-services@^4.2.6,o-message@^5.4.2,o-table@^9.3.1,o-autoinit@^3.1.3,o-forms@^9.11.2,o-tracking@^4.5.0&#38;system_code=origami-website"></script><script defer src="/assets/tracking.js"></script><link rel="stylesheet" href="/_astro/404.93bfcc51.css" />
<link rel="stylesheet" href="/_astro/RacingBars.0a6fad8c.css" /><script type="module">var o=document.querySelector("html");if(/(^|\s)o-typography-fonts-loaded=1(;|$)/.test(document.cookie))for(var a=["sans","sans-bold","display","display-bold"],e=0;e<a.length;e++)o.className=o.className.replace("o-typography--loading-"+a[e],"");var t="querySelector"in document&&"localStorage"in window&&"addEventListener"in window;t&&(document.documentElement.className=document.documentElement.className.replace(/\bcore\b/g,"enhanced"));
</script></head><body><div class="o-layout o-layout--docs" data-o-component="o-layout"><div class="o-layout__header"><header class="o-header-services" data-o-component="o-header-services"><div class="o-header-services__top"><div class="o-header-services__hamburger"><a class="o-header-services__hamburger-icon" href="#" role="button"><span class="o-header-services__visually-hidden">Open primary navigation</span></a></div><a href="/" class="o-header-services__logo"><span class="o-header-services__visually-hidden">To homepage</span></a><div class="o-header-services__title"><a class="o-header-services__product-name" href="/">Origami</a><span class="o-header-services__product-tagline">Frontend Components &amp; Services</span></div></div><nav class="o-header-services__primary-nav" aria-label="primary"><ul class="o-header-services__primary-nav-list"><li><a href="/">Home</a></li><li><a href="/documentation/">Documentation</a></li><li><a href="/storybook/">Storybook</a></li><li><a href="/blog/">Blog</a></li></ul></nav></header><div id="decomission-warning" class="o-message o-message--notice o-message--warning" data-o-component="o-message" data-o-message-close="false"><div class="o-message__container"><div class="o-message__content"><p class="o-message__content-main"><span class="o-message__content-highlight">The Origami Registry is being decommissioned</span><span>&nbsp;by the end of March 2024 and replaced with <a href="https://origami.ft.com/storybook/">Storybook</a>. For more information please read our <a href="https://origami.ft.com/blog/2024/02/12/newsletter/#goodbye-registry">blog post</a>.</span></p><p class="o-message__content-additional">
Please share any feedback in our #origami-chat Slack channel.
</p></div></div></div></div><div class="o-layout__sidebar"></div><div class="o-layout__main o-layout-typography"><h1 id="sass-build-times" class="o-layout__linked-heading"><a href="#sass-build-times" title="Link directly to this section of the page" class="o-layout__linked-heading__link"><span class="o-layout__linked-heading__content">Sass Build Times</span><span class="o-layout__linked-heading__label">#</span></a></h1><p>
Posted on <time>24 January 2024</time>
by Lee Moody.
</p><p><abbr title="Too long; didn't read"><strong>TL;DR: </strong></abbr>Sass build times got you down? Enable Sass monitoring in your project and let us know.</p><p>Weâ€™ve heard many teams at the FT are struggling with slow Sass build times. Friction between making a change and seeing the result can be pretty painful, right! It slows down our ability to iterate and deliver, and gives ample opportunities for distractionâ€¦ and doom scrollingâ€¦ as we wait.</p>
<p>We canâ€™t blame Sass too much, itâ€™s wonderful, but we have a large estate of complex Sass that has become slow. In our view, <a href="https://docs.google.com/document/d/1RuGduWdX0zGsgsp9C7lIhXgqEia6sWK900_3XVwYDIM/edit#heading=h.1f3yolavobef">now is the time to migrate away from Sass</a>.</p>
<h2 id="enable-sass-monitoring">Enable Sass Monitoring</h2>
<p>If youâ€™re working on a project which builds with Page Kit (<a href="https://github.com/Financial-Times/dotcom-page-kit">dotcom-build-sass</a>), please <a href="#remote-sass-monitoring">setup remote Sass monitoring</a>. This will help us make a case to invest in migrating away from Sass more quickly.</p>
<p><img src="/assets/images/2024-01-24-sass-build-times/sass-css.png?width=500&#x26;source=origami" alt="A console log within a terminal, sharing that the person has in total waited 2.7 hours for Sass to compile."></p>
<h3 id="remote-sass-monitoring">Remote Sass monitoring</h3>
<ol>
<li>Upgrade your project to <a href="https://github.com/Financial-Times/dotcom-page-kit/releases/tag/v9.3.2">dotcom-build-sass@9.3.2</a> or above.</li>
<li>Add the following environment variables to Doppler for <code>dev</code>, we want these during local development.
<ul>
<li><code>FT_SASS_STATS_MONITOR</code> â€“ <code>on</code>, to enable remote logging to <a href="https://github.com/Financial-Times/biz-ops-metrics-api/blob/main/docs/API_DEFINITION.md#authentication">biz-ops-metrics</a></li>
<li><code>FT_SASS_BIZ_OPS_API_KEY</code> - Generate a <strong>prod</strong> <a href="https://apigateway.in.ft.com/key-form/system">Biz Ops Metrics API key</a> for your system.</li>
<li><code>FT_SASS_BIZ_OPS_SYSTEM_CODE</code> - The <a href="https://biz-ops.in.ft.com/">biz-ops</a> system code for your project, so we know where to attribute Sass build times.</li>
</ul>
</li>
<li>Prepend your local front-end build script in <code>package.json</code> to fetch Doppler secrets, <code>doppler run --project [your-project] --config dev --</code>. This may vary depending on your project. E.g:</li>
</ol>
<pre is:raw="" class="astro-code github-dark" style="background-color: #24292e; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #FDAEB7"><span style="user-select: none;">-</span> "build": "dotcom-tool-kit build:local",</span></span>
<span class="line"><span style="color: #85E89D"><span style="user-select: none;">+</span> "build": "doppler run --project [your-project] --config dev -- dotcom-tool-kit build:local",</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FDAEB7"><span style="user-select: none;">-</span> "watch": "webpack --progress --mode=development --watch",</span></span>
<span class="line"><span style="color: #85E89D"><span style="user-select: none;">+</span> "watch": "doppler run --project [your-project] --config dev -- webpack --progress --mode=development --watch",</span></span></code></pre>
<p>Now, each time Sass is built, <a href="https://biz-ops.in.ft.com/api-explorer?query=%7B%0A++teams%28where%3A+%7B+code%3A+%22customer-products-subscriber-growth%22+%7D%29+%7B%0A++++delivers%28where%3A+%7B+code%3A+%22next-newsletter-signup%22+%7D%29+%7B%0A++++++code%0A++++++metric%28name%3A+%22sass-build-time%22%29+%7B%0A++++++++value%0A++++++++timestamp%0A++++++%7D%0A++++%7D%0A++++metricRollup%28path%3A+%22delivers.metric%22%2C+method%3A+sum%29+%7B%0A++++++value%0A++++++timestamp%0A++++%7D%0A++%7D%0A%7D&#x26;title=Custom+Biz+Ops+report">the duration is sent to biz-ops</a>.</p>
<h3 id="local-sass-monitoring">Local Sass monitoring</h3>
<p>After your project has updated to <a href="https://github.com/Financial-Times/dotcom-page-kit/releases/tag/v9.3.2">dotcom-build-sass@9.3.2</a> or above, you will periodically see a log showing your cumulative Sass build time. Like this:</p>
<p><img src="/assets/images/2024-01-24-sass-build-times/sass-css.png?width=500&#x26;source=origami" alt="A console log within a terminal, sharing that the person has in total waited 2.7 hours for Sass to compile."></p>
<p>Whilst remote monitoring will prove very useful, this local report is more for fun. Or, motivation. It highlights the total time you have spent waiting for Sass in all â€“ at least since the temporary file itâ€™s stored in was last deleted by your operating system.</p>
<p>Set the <code>FT_SASS_STATS_NOTICE</code> environment variable to configure how often you see the port on on your machine. One of <code>throttle</code>, <code>never</code>, or <code>always</code>.</p>
<p>E.g. to see your cumulative Sass build time after every build <code>FT_SASS_STATS_NOTICE=always npm run build</code></p>
<h2 id="more-ways-for-you-to-help">More ways for you to help</h2>
<ol>
<li>Share your experience inÂ <a href="https://financialtimes.enterprise.slack.com/archives/C06FD4DSBQB">#sass-to-css</a>! If Sass build times have you down, feel free to have a good moan. Weâ€™d also love to see your cumulative Sass build time â€“ letâ€™s weâ€™ll see who gets the high score! ðŸ˜¬</li>
<li>Become an early adopter of our <a href="https://origami-for-everyone.ft.com/components/buttons/">new Origami components</a>, which donâ€™t use Sass. Let us know youâ€™re interested in <a href="https://financialtimes.enterprise.slack.com/archives/CSW6B2VAN">#origami-chat</a> and weâ€™ll help you get started.</li>
<li>Write less Sass yourself and refactor custom variables, functions, or mixins. Our <a href="https://docs.google.com/document/d/1RuGduWdX0zGsgsp9C7lIhXgqEia6sWK900_3XVwYDIM/edit#heading=h.1f3yolavobef">Sass to CSS proposal</a> includes examples of FT Sass and modern CSS alternatives.</li>
<li>Praise Ben Holmes and the Developer Automation team (<a href="https://financialtimes.enterprise.slack.com/archives/C05RVF48VPF">#developer-automation</a>). Theyâ€™re working on automated Origami Sass to CSS migration tools (codemods). Checkout this prototype, how cool! More news to follow.
<img src="/assets/images/2024-01-24-sass-build-times/origami-codemod.gif?width=500&#x26;source=origami" alt="Running a codemode to automate swapping a Sass mixin for CSS Custom Properties"></li>
</ol>
<h2 id="big-thanks-to">Big thanks to</h2>
<ul>
<li>Joel Carr and the CP Platforms team for supporting us to use PageKit to roll out Sass monitoring to key Customer Products projects.</li>
<li>Kiya Gurmesa, Rhys Evans, and Engineering Insights for support using the <a href="https://github.com/Financial-Times/biz-ops-metrics-api">Biz-Ops Metrics API</a>. This is how we plan to aggregate local build times.</li>
<li>Ben Holmes and Developer Automation for working on Origami Sass to CSS migration tools (codemods). Watch this space for more information!</li>
<li>Andy Gout for helping us test this out, and for rolling out so quickly to <a href="https://github.com/Financial-Times/next-newsletter-signup/pull/685/files">next-newsletter-signup (PR)</a>.</li>
</ul></div><div class="o-layout__footer"><footer class="o-footer-services"><div class="o-footer-services__container"><div class="o-footer-services__wrapper o-footer-services__wrapper--top"><a class="o-footer-services__icon-link o-footer-services__icon-link--github" href="https://github.com/Financial-Times/origami">View project on GitHub</a><a class="o-footer-services__icon-link o-footer-services__icon-link--github" href="https://github.com/Financial-Times/origami/pulls?q=is%3Apr+is%3Aopen+sort%3Aupdated-desc">View proposals to Origami</a><a class="o-footer-services__icon-link o-footer-services__icon-link--slack" href="https://financialtimes.slack.com/messages/origami-support">#origami-support</a><p class="o-footer-services__content">
Get in touch at <a href="mailto:origami.support@ft.com">origami.support@ft.com</a> for help or advice.
				Feel free to
<a href="https://github.com/Financial-Times/origami/edit/main/apps/website/src/pages/blog/2024/01/24/sass-build-times/">suggest an edit to this page</a>.
</p></div></div><div class="o-footer-services__container"><div class="o-footer-services__wrapper o-footer-services__wrapper--legal"><div class="o-footer-services__links"><a href="https://help.ft.com/help/legal-privacy/cookies/">Cookies</a><a href="https://help.ft.com/help/legal-privacy/copyright/copyright-policy/">Copyright</a><a href="https://help.ft.com/help/legal-privacy/privacy/">Privacy</a><a href="https://help.ft.com/help/legal-privacy/terms-conditions">Terms & Conditions</a><a href="https://help.ft.com/legal-privacy/copyright-policy/">Slavery Statement & Policies</a></div><p><span>&copy; THE FINANCIAL TIMES LTD 2024.</span> FT and
				'Financial Times' are trademarks of The Financial Times Ltd.
</p></div></div></footer></div></div></body></html>