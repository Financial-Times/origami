
@mixin oBannerBase {
	position: fixed;
	bottom: 0;
	left: 0;
	display: block;
	width: 100%;
}

@mixin oBannerClosed {
	display: none;
}

@mixin oBannerOuter {
	@include oColorsFor(o-banner, background text);
	@include oVisualEffectsShadowsElevation('high');
}

@mixin oBannerInner {
	@include oTypographySans($scale: 2);
	// sass-lint:disable no-vendor-prefixes
	-webkit-font-smoothing: antialiased;
	// sass-lint:enable no-vendor-prefixes
	position: relative;
	display: flex;
	align-items: center;
	justify-content: space-between;
	max-width: map-get($o-grid-layouts, XL);
	margin: 0 auto;
	padding: $_o-banner-spacing 0;
	box-sizing: border-box;

	@include oGridRespondTo($until: S) {
		@include oTypographySans($scale: 0);
		display: block;
		padding: $_o-banner-spacing;
		padding-top: oTypographySpacingSize($units: 7);
	}
}

@mixin oBannerContent {
	padding: 0 $_o-banner-spacing;

	h1,
	h2,
	h3,
	h4,
	h5,
	h6 {
		@include oTypographySans($scale: 3);
		@include oTypographyBold($font: 'sans');
		margin-top: 0;
		margin-bottom: oTypographySpacingSize(1);
	}
	p {
		margin-top: 0;
		margin-bottom: 0;
	}
	b,
	strong {
		@include oTypographyBold($font: 'sans');
	}
	> ul {
		@include oTypographyListUnordered;
		margin-top: oTypographySpacingSize(3);
		margin-bottom: 0;

		li {
			@include oTypographySans($scale: 2, $line-height: oTypographySpacingSize(7));
		}
		li:before {
			color: inherit;
		}
	}
	a {
		@include oTypographyLinkCustom(
			$baseColor: oColorsGetUseCase(o-banner-link, text),
			$hoverColor: oColorsGetUseCase(o-banner-link, text),
			$outlineColor: oColorsGetUseCase(o-banner-link, text),
			$backgroundColor: oColorsGetUseCase(o-banner, background)
		);
	}

	@include oGridRespondTo($until: S) {
		padding: 0;
	}
}

@mixin oBannerContentLong {
	@include oGridRespondTo($until: M) {
		display: none;
	}
}

@mixin oBannerContentShort {
	@include oGridRespondTo($from: M) {
		display: none;
	}
}

@mixin oBannerHeading {
	h1,
	h2,
	h3,
	h4,
	h5,
	h6 {
		margin-bottom: 0;
	}
	&:after {
		@include oTypographyMargin($top: 2, $bottom: 4);
		content: '';
		display: block;
		width: 100px;

		// Color is set separately for easier overriding later
		border-bottom: oTypographySpacingSize(2) solid;
		border-color: oColorsGetColorFor(o-banner-heading-rule, background);
	}
}

@mixin oBannerActions {
	@include oTypographySans($scale: 2);
	display: flex;
	align-items: center;

	@include oGridRespondTo($until: S) {
		flex-direction: column;
		align-items: flex-start;
		margin-top: oTypographySpacingSize(6);
	}
}

@mixin oBannerAction {
	padding-right: $_o-banner-spacing;

	@include oGridRespondTo($until: S) {
		padding-right: 0;
	}
}

@mixin oBannerActionSecondary {
	@include oGridRespondTo($until: S) {
		margin-top: $_o-banner-spacing / 4;
	}
}

@mixin oBannerButton {
	@include oButtons(
		$size: big,
		$theme: (
			'background': oColorsGetUseCase(o-banner-button, background),
			'accent': oColorsGetUseCase(o-banner-button, text),
			'colorizer': 'primary'
	));
	white-space: nowrap;
	// This is a hack around the fact that custom buttons do not
	// support buttons with three colours. TODO: add this to o-buttons
	// https://github.com/Financial-Times/o-buttons/issues/128
	&,
	&:not([disabled]):active {
		@include oColorsFor(o-banner-button-active, text);
	}
}

@mixin oBannerLink {
	@include oTypographyLinkCustom(
		$baseColor: oColorsGetUseCase(o-banner-link, text),
		$hoverColor: oColorsGetUseCase(o-banner-link, text),
		$outlineColor: oColorsGetUseCase(o-banner-link, text),
		$backgroundColor: oColorsGetUseCase(o-banner, background)
	);
	@include oTypographySans($scale: 0);
	white-space: nowrap;
}

@mixin oBannerCloseButton {
	@include oIconsGetIcon('cross', oColorsGetColorFor(o-banner-close, text), $_o-banner-close-button-size, $iconset-version: 1);
	// start: undo button styles
	appearance: none;
	color: inherit;
	border: 0;
	padding: 0;
	font: inherit;
	cursor: pointer;
	outline: inherit;
	// end: undo button styles
	$close-button-position: round(($_o-banner-spacing - $_o-banner-close-button-size) / 2);
	display: block;
	position: absolute;
	right: $close-button-position;
	top: $close-button-position;
}

@mixin oBanner($class: 'o-banner', $themes: 'all') {

	// Base banner styles
	.#{$class} {
		@include oBannerBase;

		&--closed {
			@include oBannerClosed;
		}

		&__outer {
			@include oBannerOuter;
		}
		&__inner {
			@include oBannerInner;
		}
		&__content {
			@include oBannerContent;
		}
		&__content--long {
			@include oBannerContentLong;
		}
		&__content--short {
			@include oBannerContentShort;
		}
		&__heading {
			@include oBannerHeading;
		}
		&__actions {
			@include oBannerActions;
		}
		&__action {
			@include oBannerAction;
		}
		&__action--secondary {
			@include oBannerActionSecondary;
		}
		&__button {
			@include oBannerButton;
		}
		&__link {
			@include oBannerLink;
		}
		&__close {
			@include oBannerCloseButton;
		}
	}

	// Theme styles
	@if $themes == 'all' {
		@each $theme in $_o-banner-themes {
			@include _oBannerGetThemeMixin($theme, $class);
		}
	} @else if $themes != false  {
		@each $theme in $themes {
			@if index($_o-banner-themes, $theme) != null {
				@include _oBannerGetThemeMixin($theme, $class);
			} @else {
				@error "There is no theme '#{$theme}' available in o-banner, please use one of the following: #{$_o-banner-themes}.";
			}
		}
	}
}
