////
/// @group Sections
////

/// @access public
/// @param {string} $class - The block level class name (BEM naming convention).
/// @require {mixin} oFormsMessage - Sections optionally contain a message, which is coloured according to the section modifier.
/// @output Styles to highlight sections of a form with multiple instances of o-forms, optionally with a global message for the wrapped inputs.
@mixin oFormsSection($class: 'o-forms') {
	$message-selector: #{&}__message;
	max-width: $_o-forms-field-max-width;
	padding: $_o-forms-padding 0;
	margin: 0 0 $_o-forms-section-spacing;
	box-sizing: border-box;

	@include oGridRespondTo(S) {
		margin-left: 0;
		margin-right: 0;
	}

	// A highlighted section.
	&--highlight {
		background-color: _oFormsGet('section-highlight-background');
	}

	// An errored section, which will have a coloured message.
	&--error {
		background-color: _oFormsGet('section-error-background');
		#{$message-selector} {
			background-color: _oFormsGet('message-error-background');
			color: _oFormsGet('message-error-text');
		}
	}

	// Messages which sit at the top of a section with no margin.
	&__message {
		@include oFormsMessage();
		margin-top: -$_o-forms-padding;
	}

	// The last o-forms input does not need a bottom margin now.
	& > .#{$class}:last-child {
		margin-bottom: 0;
	}
}

/// @access public
/// @output Styles for a message which spans multiple o-forms instances.
@mixin oFormsMessage() {
	@include oTypographySize($_o-forms-typography-scale-large);
	background-color: _oFormsGet('section-highlight-background');
	padding: 0 $_o-forms-padding;
	margin-bottom: $_o-forms-spacing;

	p {
		font-family: $o-forms-font-family;
		padding: oTypographySpacingSize(2) 0;
		margin: 0;
	}
}
