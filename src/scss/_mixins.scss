/// Construct a logo image URL
///
/// @param {String} $logo-name
/// @param {Number} $fallback-width
@mixin _oFooterBrandImage($logo-name, $fallback-width) {
	$base-url: "#{$o-footer-image-base-url}/#{$o-footer-image-service-version}/images/raw/ftlogo:";
	background-image: url($base-url + $logo-name + "?source=o-footer&format=svg");
}

/// Styles for the dark theme
@mixin _oFooterThemeDark() {
	.o-footer--theme-dark {
		@include oColorsFor('o-footer-dark', 'text' 'background');

		// Make the white text look crisper and less bold on dark backgrounds
		// sass-lint:disable no-vendor-prefixes
		-webkit-font-smoothing: antialiased;
		-moz-osx-font-smoothing: grayscale;
		// sass-lint:enable no-vendor-prefixes

		.o-footer__external-link,
		.o-footer__matrix-title[aria-expanded] {
			border-color: oColorsGetColorFor('o-footer-dark', 'border');
		}

		.o-footer__matrix-title a {
			color: oColorsGetColorFor('o-footer-dark-title', 'text');
		}

		a {
			color: oColorsGetColorFor('o-footer-dark-link', 'text');

			&:hover,
			&:focus {
				color: oColorsGetColorFor('o-footer-dark-link-hover', 'text');
			}
		}

		.o-footer__external-link a:after {
			@include oIconsGetIcon('arrow-right', oColorsGetColorFor('o-footer-dark-title', 'text'), $_o-footer-icon-size, $apply-base-styles: false, $iconset-version: 1);
		}

		.o-footer__copyright {
			color: oColorsGetColorFor('o-footer-dark-copyright', 'text');
		}

		.o-footer__brand {
			@include oColorsFor('o-footer-dark', 'text');
			background-color: oColorsGetColorFor('o-footer-dark-brand', 'background');
		}
	}
}

/// Styles for the light theme
@mixin _oFooterThemeLight() {
	.o-footer--theme-light {
		@include oColorsFor('o-footer-light', 'text' 'background');

		.o-footer__title {
			color: oColorsGetColorFor('o-footer-light-title', 'text');
		}

		.o-footer__matrix-title,
		.o-footer__matrix-title[aria-expanded] {
			border-color: oColorsGetColorFor('o-footer-light', 'border');
		}

		a {
			color: oColorsGetColorFor('o-footer-light-link', 'text');

			&:hover,
			&:focus {
				color: oColorsGetColorFor('o-footer-light-link-hover', 'text');
			}
		}

		.o-footer__copyright {
			color: oColorsGetColorFor('o-footer-light-copyright', 'text');
		}

		.o-footer__brand {
			@include oColorsFor('o-footer-light', 'text');
			background-color: oColorsGetColorFor('o-footer-light-brand', 'background');
		}

		.o-footer__external-link a {
			@include oColorsFor('o-footer-light', 'text');

			&:after {
				@include oIconsGetIcon('arrow-right', oColorsGetColorFor('o-footer-light-title', 'text'), $_o-footer-icon-size, $apply-base-styles: false, $iconset-version: 1);
			}
		}
	}
}

/// Styles for the navigation matrix
@mixin _oFooterMatrix() {
	.o-footer__matrix,
	.o-footer__matrix-content {
		@include oGridRow();
	}

	.o-footer__matrix-group,
	.o-footer__matrix-column {
		@include oGridColspan();
	}

	@each $key, $value in $_o-footer-matrix {
		.o-footer__matrix-group--#{$key} {
			@include oGridColspan(map-get($value, 'group'), $width-only: true);

			.o-footer__matrix-column {
				@include oGridColspan(map-get($value, 'columns'), $width-only: true);
			}
		}
	}

	.o-footer__matrix-title,
	.o-footer__matrix-link {
		overflow: hidden;
		white-space: nowrap;
		text-overflow: ellipsis;
	}

	.o-footer__matrix-title {
		margin: 0;
		line-height: inherit;
		font-size: inherit;
		font-weight: 600;

		&[aria-expanded] {
			$line-size: $_o-footer-spacing-unit * 2;

			position: relative;
			border-top: 1px solid;
			line-height: $line-size;
			cursor: pointer;

			&:after {
				content: ' ';
				position: absolute;
				right: 0;
				top: ($line-size - $_o-footer-icon-size) / 2;

				.o-footer--theme-dark & {
					@include oIconsGetIcon('arrow-down', oColorsGetColorFor('o-footer-dark', 'text'), $_o-footer-icon-size, $iconset-version: 1);
				}

				.o-footer--theme-light & {
					@include oIconsGetIcon('arrow-down', oColorsGetColorFor('o-footer-light', 'text'), $_o-footer-icon-size, $iconset-version: 1);
				}
			}
		}

		&[aria-expanded="true"] {
			&:after {
				// don't download another icon...
				transform: rotate(180deg);
			}
		}
	}

	.o-footer__matrix-content {
		&[aria-hidden="true"] {
			display: none;
		}
	}

	.o-footer__matrix-column {
		margin-top: oSpacingByName('s4');
		margin-bottom: oSpacingByName('s4');
	}

	.o-footer__matrix-link {
		padding-top: oSpacingByName('s2');
		padding-bottom: oSpacingByName('s2');
		display: block;

		&:first-child {
			margin-top: -(oSpacingByName('s2'));
		}
	}
}
