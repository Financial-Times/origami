//
// Prefixes and generates both silent placeholders and, if $o-modal-is-silent == false, concrete classes for a list of classnames
// If $compound is set to true it will handle compund selectors too
//
// oModalClass(row) => .o-modal-row, %o-modal-row
// oModalClass(row col) => .o-modal-row, %o-modal-row, .o-modal-col, %o-modal-col
// oModalClass((row col, box), true) => .o-modal-row .o-modal-col, %o-modal-row %o-modal-col, .o-modal-box, %o-modal-box
//
@function oModalClass ($classes, $separator: '-', $compound: false) {
	$aggregated-selector: ();	
	
	@each $class in $classes {

		@if ($compound) {
			$loud-compound-selector: null;
			$silent-compound-selector: null;
			@each $part in $class {
				$silent-compound-selector: append($silent-compound-selector, #{'%o-modal#{$separator}#{$separator}#{$part}'});
		    }
		    $aggregated-selector: append($aggregated-selector, $silent-compound-selector, comma);
			@if (not $o-modal-is-silent) {
				@each $part in $class {
					$loud-compound-selector: append($loud-compound-selector, #{'.o-modal#{$separator}#{$separator}#{$part}'});
				}
				$aggregated-selector: append($aggregated-selector, $loud-compound-selector, comma);
			}				
		} @else {

			$aggregated-selector: append($aggregated-selector, #{'%o-modal#{$separator}#{$separator}#{$class}'}, comma);
		  
			@if (not $o-modal-is-silent) {
				$aggregated-selector: append($aggregated-selector, #{'.o-modal#{$separator}#{$separator}#{$class}'}, comma);
			}
		}
	}

	@return #{$aggregated-selector};
}

//
// Same as above but is immediately used to wrap some styles in the generated selector
//
@mixin oModalClass ($classes, $separator: '-', $compound: false) {
	@include oModalWrapInSelector(oModalClass($classes, $separator, $compound)) { 
		@content 
	}
}

//
// Wraps a bundle of styles in a given selector
// If a $selector is not provided the styles are printed out unaltered
// If $include-unwrapped is true then a copy of the unaltered styles is printed in addition to the wrapped styles
//
@mixin oModalWrapInSelector ($selector:null, $include-unwrapped: false) {
	@if (not $selector or $include-unwrapped) {
		@content
	}

	@if($selector) {
		#{$selector} { @content }
 	} 
}

// 
// Adds cross-browser box-sizing styles
//
@mixin oModalBoxSizing($value, $polyfill: false) {
	-moz-box-sizing: $value;
	box-sizing: $value;
	@if ($polyfill) {
		@include oUseragentIe7BoxSizing();		
	}
}

