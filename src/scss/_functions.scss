/**
 * Return the CSS color for a palette colour name
 */
@function oColorsGetPaletteColor($name) {
	@if (map-has-key($o-colors-palette, $name)) {
		@return map-get($o-colors-palette, $name);
	} @else {
		@warn "Color name '" + $name + "' is not defined in the palette";
		@return undefined;
	}
}

/**
 * Return the defined palette colour name for a use case / property combination
 */
@function _oColorsGetUseCase($usecase, $property) {
	$props: map-get($o-colors-usecases, $usecase);
	@if ($props) {
		$color: map-get($props, $property);
		@if ($color == null and $property != 'all') {
			$color: map-get($props, all);
		}
		@if (map-has-key($props, '_deprecated')) {
			@warn "Color use case '" + $usecase + "'' is deprecated (property '"+$property+"' was requested): " + map-get($props, '_deprecated');
		}
		@return $color;
   	}
	@return null;
}

/**
 * Return the CSS colour name of the first defined use case in a prioritised list for a use case / property combination
 */
@function oColorsGetColorFor($namelist, $property: all, $default: null) {
	$color: null;
	@each $name in $namelist {
		@if ($color == null) {
			$color: _oColorsGetUseCase($name, $property);
		}
	}
	@if ($color == null) {
		@if ($default == null) {
			$warn: "Undefined use-case: can\'t resolve use case list '" + $namelist + "'";
			@if ($property) {
				$warn: $warn + " for property '" + $property + "'";
			}
			@warn $warn;
			$color: transparent;
		} @elseif ($default == undefined) {
			@return undefined;
		} @else {
			$color: $default;
		}
	}
	@return oColorsGetPaletteColor($color);
}
