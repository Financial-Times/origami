////
/// @group Use cases
/// @link http://registry.origami.ft.com/components/o-typography
////

/// Subscript text
@mixin oTypographySub {
	@include oTypographySans(-2);
	display: inline-block;
	margin-bottom: -5px;
	vertical-align: sub;
}

/// Superscript text
@mixin oTypographySuper {
	@include oTypographySans(-2);
	display: inline-block;
	margin-top: -3px;
	vertical-align: super;
}

/// Custom link styles
@mixin oTypographyLinkCustom($baseColor, $hoverColor, $backgroundColor: 'paper', $outlineColor: 'teal-100') {
	color: oColorsGetPaletteColor($baseColor);
	text-decoration: none;
	cursor: pointer;
	border-bottom: 2px solid oColorsMix(oColorsGetPaletteColor($baseColor), oColorsGetPaletteColor($backgroundColor), $percentage: 20);

	&:hover {
		color: oColorsGetPaletteColor($hoverColor);
		border-bottom-color: oColorsMix(oColorsGetPaletteColor($baseColor), oColorsGetPaletteColor($backgroundColor), $percentage: 40);
	}

	&:focus {
		color: oColorsGetPaletteColor($hoverColor);
		outline: 2px solid oColorsGetPaletteColor($outlineColor);
		border-bottom-color: transparent;
	}
}

/// Standard link styles
@mixin oTypographyLink {
	@include oTypographyLinkCustom(
		$baseColor: oColorsGetUseCase(link, text),
		$hoverColor: 'teal-30'
	);
}

/// Standard link styles + external link icon.
@mixin oTypographyLinkExternal {
	@include oTypographyLink;
	@include oTypographyLinkExternalIcon(oColorsGetPaletteColor('teal'));
}

/// External link icon.
/// @param {Color} $color of the icon
@mixin oTypographyLinkExternalIcon($color) {
	// Icons align to a 40x40 pixel grid with 10px padding on each side.
	// In this case however we want to remove that padding to align the icon flush.
	// https://github.com/Financial-Times/fticons/blob/master/contributing.md#design
	$icon-size: (24 / 16) * 1em;
	$icon-padding: ($icon-size/40) * 10;
	$margin: 0.5ch;
	margin-right: calc(#{$icon-size} - #{$icon-padding * 2} + #{$margin}); // Space for icon.
	&::after {
		@include oIconsGetIcon('outside-page', $color, 24, $iconset-version: 1);
		content: 'Opens a new window';
		width: $icon-size;
		height: $icon-size;
		margin: -#{$icon-padding};
		margin-right: calc(-#{$icon-size} + #{$icon-padding} - #{$margin});
		padding-left: 0.5ch;
		background-origin: content-box;
		vertical-align: middle;
		// To align middle ignoring any link border.
		border-bottom: inherit;
		border-color: transparent;
		overflow: hidden;
		text-indent: -10000px;
	}
}

/// Make something italic
@mixin oTypographyItalic {
	font-style: italic;
}

/// Styling for <ul> and <ol>
@mixin oTypographyList {
	@include oTypographyMargin($top: 0, $bottom: 7);

	li {
		@include oTypographySerif($scale: 1, $line-height: 28px);
		@include oTypographyMargin($top: 0, $bottom: 0);
		@include oColorsFor('o-typography-body');
	}
}

/// Styles for <ol> tags
@mixin oTypographyListOrdered {
	padding-left: 0;

	// Counter-increment/counter-reset is not supported in
	// <IE8, so use browserhack to only target supported browsers
	:root & {
		counter-reset: item;

		li {
			display: block;
			position: relative;
			padding-left: oTypographySpacingSize($units: 6);


			&:before {
				@include oTypographySansBold($scale: 0);
				@include oColorsFor('o-typography-list-prefix');
				display: inline-block;
				width: oTypographySpacingSize($units: 5);
				font-feature-settings: "tnum";
				margin-right: oTypographySpacingSize($units: -1);
				content: counter(item);
				counter-increment: item;
				position: absolute;
				left: 0;
				top: 4px;
			}
		}
	}
}

/// Styles for <ul> tags
/// Bullet size and spacing was suited to article font-size (18px at time of writing).
/// This has since been updated to use `em` units but maintain that ratio.
@mixin oTypographyListUnordered {
	padding-left: 0;

	li {
		display: block;
		position: relative;
		padding-left: 1.333333333em; // padding-left 24px for `li` items with font-size of 18px

		&:before {
			@include oColorsFor('o-typography-list-prefix');
			display: inline-block;
			position: absolute;
			content: '\2022'; // dot character
			left: -0.0625em;
			font-size: 1.777777778em; // font-size 32px for `li` items with font-size of 18px
		}
	}
}

/// Style for <blockquote> tags including `p`
/// and `footer` elements
@mixin oTypographyBlockquote {
	margin-left: 0;
	padding-left: oTypographySpacingSize($units: 4);
	border-left: oTypographySpacingSize($units: 1) solid oColorsGetColorFor('o-typography-blockquote', border);

	p {
		@include oTypographyBody;
	}

	footer {
		@include oTypographyFooter;
	}
}
