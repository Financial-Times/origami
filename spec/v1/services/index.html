<!DOCTYPE html>
<html lang="en-GB" class="core o-typography--loading-sans o-typography--loading-sans-bold o-typography--loading-display o-typography--loading-display-bold" data-o-component="o-typography">
<head>

	<!-- Page meta-information -->
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<title>Service Specification</title>
	<meta name="description" content="A specification which describes what is required when building Origami web services." />

	<!-- Cuts the mustard test -->
	<script>
		var cutsTheMustard = ('querySelector' in document && 'localStorage' in window && 'addEventListener' in window);
		if (cutsTheMustard) {
			document.documentElement.className = document.documentElement.className.replace(/\bcore\b/g, 'enhanced');
		}
	</script>

	<!-- Favicons -->
	<link rel="icon" type="image/svg+xml" href="https://www.ft.com/__origami/service/image/v2/images/raw/ftlogo-v1%3Aorigami?source=origami-docs&format=svg" sizes="any">
	<link rel="alternate icon" type="image/png" href="https://www.ft.com/__origami/service/image/v2/images/raw/ftlogo-v1%3Aorigami?source=origami-docs&width=16&height=16&format=png" sizes="16x16">
	<link rel="alternate icon" type="image/png" href="https://www.ft.com/__origami/service/image/v2/images/raw/ftlogo-v1%3Aorigami?source=origami-docs&width=32&height=32&format=png" sizes="32x32">
	<link rel="alternate icon" type="image/png" href="https://www.ft.com/__origami/service/image/v2/images/raw/ftlogo-v1%3Aorigami?source=origami-docs&width=96&height=96&format=png" sizes="96x96">
	<link rel="alternate icon" type="image/png" href="https://www.ft.com/__origami/service/image/v2/images/raw/ftlogo-v1%3Aorigami?source=origami-docs&width=128&height=128&format=png" sizes="128x128">
	<link rel="alternate icon" type="image/png" href="https://www.ft.com/__origami/service/image/v2/images/raw/ftlogo-v1%3Aorigami?source=origami-docs&width=196&height=196&format=png" sizes="196x196">
	<link rel="alternate icon" type="image/png" href="https://www.ft.com/__origami/service/image/v2/images/raw/ftlogo-v1%3Aorigami?source=origami-docs&width=310&height=310&format=png" sizes="310x310">

	<!-- Site links -->
	<link rel="sitemap" type="application/xml" href="/sitemap.xml" title="Sitemap" />
	<link rel="canonical" href="https://origami.ft.com/spec/v1/services/" />

	<!-- Feed -->
	<link type="application/atom+xml" rel="alternate" href="https://origami.ft.com/feed.xml" title="Origami Newsletter" />

	<!-- Progressive Font Loading -->
	<!-- https://github.com/Financial-Times/o-typography/tree/v6.1.3#setup-progressive-loading -->
	<script>
		var rootElement = document.querySelector('html')
		if (/(^|\s)o-typography-fonts-loaded=1(;|$)/.test(document.cookie)) {
			var fontLabels = ['sans', 'sans-bold', 'display', 'display-bold']
			for (var i = 0; i < fontLabels.length; i++) {
				rootElement.className = rootElement.className.replace('o-typography--loading-' + fontLabels[i], '')
			}
		}
	</script>

	<!-- Styles -->
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<style>
		/* Hide any enhanced experience content when in core mode, and vice versa. */
		.core .o--if-js,
		.enhanced .o--if-no-js {
			display: none !important;
		}
	</style>
	<link rel="stylesheet" href="https://www.ft.com/__origami/service/build/v3/bundles/css?components=o-normalise@^3.0.3,o-typography@^7.0.3,o-layout@^5.0.6,o-header-services@^5.1.0,o-footer-services@^4.0.3,o-syntax-highlight@^4.0.1,o-message@^5.1.0,o-table@^9.0.3,o-autoinit@^3.0.1&brand=internal&system_code=origami" />
	<link rel="stylesheet" href="/assets/main.css" />

	<!-- JS -->
	<script>
		(function(src) {
			if (cutsTheMustard) {
				var o = document.createElement('script');
				o.async = o.defer = true;
				o.src = src;
				var s = document.getElementsByTagName('script')[0];
				s.parentNode.insertBefore(o, s);
			}
		}('https://www.ft.com/__origami/service/build/v3/bundles/js?components=o-normalise@^3.1.0,o-typography@^7.1.0,o-layout@^5.1.0,o-header-services@^5.1.0,o-footer-services@^4.1.0,o-syntax-highlight@^4.1.0,o-message@^5.1.0,o-table@^9.1.0,o-autoinit@^3.0.1&system_code=origami'));
	</script>
</head>
<body>
	<div class="o-layout o-layout--docs" data-o-component="o-layout" data-o-layout-nav-heading-selector="h1, h2">
		
		<div class="o-layout__header">
			
<header class="o-header-services" data-o-component="o-header-services">
	<div class="o-header-services__top">
			<div class="o-header-services__hamburger">
				<a class="o-header-services__hamburger-icon" href="#" role="button">
					<span class="o-header-services__visually-hidden">Open primary navigation</span>
				</a>
			</div>
		<a href="/" class="o-header-services__logo"><span class="o-header-services__visually-hidden">To homepage</span></a>
		<div class="o-header-services__title">
			<a class="o-header-services__product-name" href="/">Origami</a>
			<span class="o-header-services__product-tagline">Frontend Components &amp; Services</span>
		</div>
	</div>

	<nav class="o-header-services__primary-nav" aria-label="primary">
		<ul class="o-header-services__primary-nav-list">
			<li>
				<a href="/" >
					Home
				</a>
			</li>
			<li>
				<a href="/docs/" >
					Docs
				</a>
			</li>
			<li>
				<a href="https://registry.origami.ft.com/components"> Registry</a>
			</li>
			<li>
				<a href="/blog/" >
					Blog
				</a>
			</li>
		</ul>
	</nav>



	

	
	<nav class="o-header-services__secondary-nav" aria-label="secondary" data-o-header-services-nav="">
		<div class="o-header-services__secondary-nav-content" data-o-header-services-nav-list="">
			<ol class="o-header-services__secondary-nav-list o-header-services__secondary-nav-list--ancestors" aria-label="Ancestor sections">
			

			
				<!-- Collection item page -->
				<li>
					
					<a href="/spec/v1/">
						
							Spec
						
					</a>
				</li>
			

			
			</ol>

			<ul class="o-header-services__secondary-nav-list o-header-services__secondary-nav-list--children" aria-label="Child sections">
			

				
					<li>
						<a href="/spec/v1/components/"
							
								
							
						>
							
								Components
							
						</a>
					</li>
				
					<li>
						<a href="/spec/v1/services/"
							
								aria-current="page"
							
						>
							
								Services
							
						</a>
					</li>
				
					<li>
						<a href="/spec/v1/manifest/"
							
								
							
						>
							
								Manifest
							
						</a>
					</li>
				

			
			</ul>
		</div>
		<button class="o-header-services__scroll-button o-header-services__scroll-button--left" title="scroll left" aria-hidden="true" disabled></button>
		<button class="o-header-services__scroll-button o-header-services__scroll-button--right" title="scroll right" aria-hidden="true" disabled></button>
	</nav>
	
</header>



		</div>
		

		<div class="o-layout__header">
	
<header class="o-header-services" data-o-component="o-header-services">
	<div class="o-header-services__top">
			<div class="o-header-services__hamburger">
				<a class="o-header-services__hamburger-icon" href="#" role="button">
					<span class="o-header-services__visually-hidden">Open primary navigation</span>
				</a>
			</div>
		<a href="/" class="o-header-services__logo"><span class="o-header-services__visually-hidden">To homepage</span></a>
		<div class="o-header-services__title">
			<a class="o-header-services__product-name" href="/">Origami</a>
			<span class="o-header-services__product-tagline">Frontend Components &amp; Services</span>
		</div>
	</div>

	<nav class="o-header-services__primary-nav" aria-label="primary">
		<ul class="o-header-services__primary-nav-list">
			<li>
				<a href="/" >
					Home
				</a>
			</li>
			<li>
				<a href="/docs/" >
					Docs
				</a>
			</li>
			<li>
				<a href="https://registry.origami.ft.com/components"> Registry</a>
			</li>
			<li>
				<a href="/blog/" >
					Blog
				</a>
			</li>
		</ul>
	</nav>



	

	
	<nav class="o-header-services__secondary-nav" aria-label="secondary" data-o-header-services-nav="">
		<div class="o-header-services__secondary-nav-content" data-o-header-services-nav-list="">
			<ol class="o-header-services__secondary-nav-list o-header-services__secondary-nav-list--ancestors" aria-label="Ancestor sections">
			

			
				<!-- Collection item page -->
				<li>
					
					<a href="/spec/v1/">
						
							Spec
						
					</a>
				</li>
			

			
			</ol>

			<ul class="o-header-services__secondary-nav-list o-header-services__secondary-nav-list--children" aria-label="Child sections">
			

				
					<li>
						<a href="/spec/v1/components/"
							
								
							
						>
							
								Components
							
						</a>
					</li>
				
					<li>
						<a href="/spec/v1/services/"
							
								aria-current="page"
							
						>
							
								Services
							
						</a>
					</li>
				
					<li>
						<a href="/spec/v1/manifest/"
							
								
							
						>
							
								Manifest
							
						</a>
					</li>
				

			
			</ul>
		</div>
		<button class="o-header-services__scroll-button o-header-services__scroll-button--left" title="scroll left" aria-hidden="true" disabled></button>
		<button class="o-header-services__scroll-button o-header-services__scroll-button--right" title="scroll right" aria-hidden="true" disabled></button>
	</nav>
	
</header>




	<div
		class="o-message o-message--notice o-message--inner o-message--warning-light"
		data-o-component="o-message"
		data-o-message-close="false"
		>
		<div class="o-message__container">
		<div class="o-message__content">
			<p class="o-message__content-main">
				<span class="o-message__content-highlight">
					The Origami specification is deprecated.
				</span>
				Origami projects may diverge from the specification, however, any new divergence will be released as a major version.
			</p>
			<p class="o-message__content-additional">
				Read our <a href="/TODO">blogpost on why the Origami specificaiton</a> has been deprecated for more information.
			</p>
		</div>
		</div>
	</div>
</div>


<div class="o-layout__sidebar"></div>

<div class="o-layout__main o-layout-typography" data-o-component="o-syntax-highlight">
	<h1 id="service-specification">Service Specification</h1>

<p>An Origami web service is a hosted service, offered as a URL endpoint that delivers content or data services. See our <a href="/docs/services/">services documentation page</a> for example services.</p>

<p>All services <strong>must</strong> adhere to the FT’s <a href="https://docs.google.com/document/d/1NbgQwJKUhSJBVMWw8OVVrKyKwRieaXq7AOtioC69XKM" class="o-typography-link--external">engineering checklist</a>.</p>

<p>Node.js and <a href="https://github.com/Financial-Times/origami-service" class="o-typography-link--external">Origami Service</a>, which extends <a href="https://expressjs.com/" class="o-typography-link--external">Express</a>, <strong>should</strong> be used as a starting point to help meet service requirements.</p>

<h2 id="naming-conventions">Naming Conventions</h2>

<p>All of our services <strong>should</strong> be named in the pattern “Origami &#x3C;name&#x3E; Service”, e.g. Origami Build Service, Origami Image Service. Services <strong>may</strong> make exceptions to this naming structure in circumstances where “Service” doesn’t effectively describe what the application does, e.g. with Origami Bower Registry. If you think that a different name might be required then discuss with the team.</p>

<p>Names <strong>may</strong> be slugified where needed (this is a lower case, hyphenated version of the name, e.g. origami-build-service, origami-image-service). For instance, a slugified name <strong>must</strong> be used for the service’s:</p>
<ul>
  <li>System code.</li>
  <li>Repository.</li>
  <li>Heroku application, where applicable.</li>
</ul>

<p>In addition to the slugified service name, Heroku applications <strong>must</strong> be suffixed with an environment identifier for non-production applications, and a region identifier for production applications. E.g. origami-build-service-qa, origami-build-service-eu.</p>

<h2 id="domains--endpoints">Domains &amp; Endpoints</h2>

<p>Origami web services <strong>should</strong> exist on a path under <code class="language-plaintext highlighter-rouge">ft.com</code> if users would benefit from HTTP2 in this case. If this is not possible for some reason then a subdomain <strong>must</strong> be used.</p>

<p>When using a path, it <strong>should</strong> be <code class="language-plaintext highlighter-rouge">/__origami/service/&lt;short-name&gt;</code>. The short name in this case is the slugified service name with origami- and -service removed, E.g. <code class="language-plaintext highlighter-rouge">/__origami/service/build</code>.</p>

<p>When using a subdomain, it <strong>should</strong> be <code class="language-plaintext highlighter-rouge">&lt;short-name&gt;.ft.com</code>. The short name in this case is the slugified service name with -service removed, E.g. <code class="language-plaintext highlighter-rouge">origami-build.ft.com</code>.</p>

<p>Services <strong>must</strong> also include a mandatory version number for all API endpoints. This <strong>must not</strong> expose minor version changes and <strong>must</strong> be prefixed with a <code class="language-plaintext highlighter-rouge">v</code>. The only exception to this rule is when the service is replicating a third-party API. E.g. a Bower registry. Good examples include:</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">www.ft.com/__origami/service/tweet/v1/&lt;endpoint&gt;</code></li>
  <li><code class="language-plaintext highlighter-rouge">www.ft.com/__origami/service/most-popular/v2/&lt;endpoint&gt;</code></li>
  <li><code class="language-plaintext highlighter-rouge">www.ft.com/__origami/service/jobs/v3/&lt;endpoint&gt;</code></li>
</ul>

<p>The api endpoint which follows the service version <strong>must</strong> be RESTful, i.e. use the most appropriate HTTP verb and URLs that semantically describe the resource to be acted upon.</p>

<p>The service’s root path <code class="language-plaintext highlighter-rouge">/</code> <strong>must</strong> redirect to the latest API version.</p>

<table class="o-table o-table--horizontal-lines" data-o-component="o-table">
<thead>
	<tr>
		<th scope="col" role="columnheader">Service name</th>
		<th scope="col" role="columnheader">Repository</th>
		<th scope="col" role="columnheader">Heroku app</th>
		<th scope="col" role="columnheader">URL</th>
	</tr>
</thead>
<tbody>
	<tr>
		<td>Origami Tweet Service</td>
		<td>origami-tweet-service</td>
		<td>origami-tweet-service-eu</td>
		<td><code>www.ft.com/__origami/service/tweet/v1</code> or <code>origami-tweet.ft.com/v1</code></td>
	</tr>
	<tr>
		<td>Origami Most Popular Service</td>
		<td>origami-most-popular-service</td>
		<td>origami-most-popular-service-eu</td>
		<td><code>www.ft.com/__origami/service/most-popular/v1</code> or <code>origami-most-popular.ft.com/v1</code></td>
	</tr>
</tbody>
</table>

<h2 id="request-source">Request Source</h2>

<p>Services <strong>must</strong> require API endpoint requests to contain a <code class="language-plaintext highlighter-rouge">source</code> query string parameter to identify the requesting application, unless the service is replicating a third-party API. E.g. a Bower registry. If the <code class="language-plaintext highlighter-rouge">source</code> query parameter is missing, the service <strong>must</strong> return a <code class="language-plaintext highlighter-rouge">400 Bad Request</code> response status code.</p>

<p>Requests to non-API endpoints such as the root path or <code class="language-plaintext highlighter-rouge">/__about</code> <strong>should not</strong> require the source parameter.</p>

<p>If you are building a Node.js/Express service, we provide an <a href="https://github.com/Financial-Times/source-param-middleware" class="o-typography-link--external">Express middleware</a> to check source parameters.</p>

<h2 id="cache-control">Cache Control</h2>

<p>Services <strong>must</strong> include an explicit <code class="language-plaintext highlighter-rouge">Cache-Control</code> header in all HTTP responses that have a <code class="language-plaintext highlighter-rouge">2xx</code> or <code class="language-plaintext highlighter-rouge">3xx</code> status.</p>

<h2 id="cors-response-headers">CORS Response Headers</h2>

<p>Services <strong>must</strong> serve permissive CORS response headers to allow the endpoints to be consumed in-browser from any origin (though consuming in-browser is discouraged). If CORS is supported, the service <strong>must</strong> support all potential pre-flight requests that would be required in the case of requests for HTTP methods other than GET.</p>

<h2 id="error-responses">Error Responses</h2>

<p>When an error occurs that prevents the service from returning the output requested, the HTTP response code <strong>must</strong> be in the <code class="language-plaintext highlighter-rouge">5xx</code> or <code class="language-plaintext highlighter-rouge">4xx</code> range.</p>

<h2 id="versioning">Versioning</h2>

<p>A “backwards compatible change” is defined as one that, in the case of JSON output, adds a new property to an object, or adds or removes elements from an array. Any changes that remove existing properties of objects, or change the type of a value, are breaking. In the case of HTML output, any change that requires accompanying changes in a module component (CSS, JavaScript or other resources that act on the HTML) is breaking.</p>

<p>In the case of breaking changes, a service <strong>must</strong>:</p>

<ul>
  <li>Provide a new set of API endpoints with updated version number.</li>
  <li>Continue to support previous versions.</li>
  <li>Communicate the deprecation of the previous version to the service consumers and the wider business.</li>
</ul>

<p>To decommission a previous version you <strong>must</strong>:</p>

<ul>
  <li>Give at least 6 months notice via an email notification to the service consumers and the wider business.</li>
  <li>Review the top referring applications identified by the <code class="language-plaintext highlighter-rouge">source</code> parameter and proactively notify their owners.</li>
  <li>Following the expiry of the termination date, the service <strong>should</strong> return either a <code class="language-plaintext highlighter-rouge">410 Gone</code>, a static copy of the last content to be generated, or redirect to the new version if the API is compatible.</li>
</ul>

<h2 id="documentation">Documentation</h2>

<p>Services <strong>must</strong> serve content on the bare versioned endpoints (e.g. <code class="language-plaintext highlighter-rouge">/v1/</code>) that documents the service, or links to documentation under a <code class="language-plaintext highlighter-rouge">docs</code> path (e.g. <code class="language-plaintext highlighter-rouge">/v1/docs/</code>). Documentation <strong>should</strong> use the <a href="https://registry.origami.ft.com/components/o-layout">o-layout</a> component for formatting and layout.</p>

<h2 id="jsonp">JSONP</h2>

<p>Services <strong>must</strong> use the querystring parameter <code class="language-plaintext highlighter-rouge">callback</code> if JSONP is supported. JSONP support is, however, not required.</p>


	
</div>


		
		<div class="o-layout__footer">
			<footer class="o-footer-services">
	<div class="o-footer-services__container">
		<div class="o-footer-services__wrapper o-footer-services__wrapper--top">
			<a class="o-footer-services__icon-link o-footer-services__icon-link--github" href="https://github.com/Financial-Times/origami">View project on GitHub</a>
			<a class="o-footer-services__icon-link o-footer-services__icon-link--github" href="https://github.com/Financial-Times/origami/pulls?q=is%3Apr+is%3Aopen+sort%3Aupdated-desc">View proposals to Origami</a>
			<a class="o-footer-services__icon-link o-footer-services__icon-link--slack" href="https://financialtimes.slack.com/messages/origami-support">#origami-support</a>
			<p class="o-footer-services__content">Get in touch at <a href="mailto:origami.support@ft.com">origami.support@ft.com</a> for help or advice. Feel free to
				<a class="o-footer-services__content--external"   href='https://github.com/Financial-Times/origami/edit/main/apps/website/_specification-v1/services.md'>suggest an edit to this page</a>.</p>
		</div>
	</div>
	<div class="o-footer-services__container">
		<div class="o-footer-services__wrapper o-footer-services__wrapper--legal">
			<div class="o-footer-services__links">
			<a href="http://help.ft.com/help/legal-privacy/cookies/">Cookies</a>
			<a href="http://help.ft.com/help/legal-privacy/copyright/copyright-policy/">Copyright</a>
			<a href="http://help.ft.com/help/legal-privacy/privacy/">Privacy</a>
			<a href="http://help.ft.com/help/legal-privacy/terms-conditions">Terms & Conditions</a>
		</div>
		<p><span>&copy; THE FINANCIAL TIMES LTD 2022.</span> FT and 'Financial Times' are trademarks of The Financial Times Ltd.</p>
	</div>
</footer>

		</div>
		
	</div>

	

</body>
</html>
