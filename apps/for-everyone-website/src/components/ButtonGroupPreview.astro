---
import {renderToString} from 'react-dom/server';
const brand = Astro.props.brand;
import {Button, ButtonGroup} from '@financial-times/o3-button';
const componentProps = Astro.props.componentProps;
const ComponentInstance = ButtonGroup({
	children: [
		...componentProps.buttons.map(buttonProps => {
			return Button(buttonProps);
		}),
	],
});
const componentHtml = renderToString(ComponentInstance);
const componentJSX =
	`<ButtonGroup>\n` +
	`${componentProps.buttons
		.map(buttonProps => {
			return `\t<Button ${Object.entries(buttonProps)
				.map(([prop, value]) => {
					return `${prop}={${JSON.stringify(value)}}`;
				})
				.join(' ')} />`;
		})
		.join('\n')}` +
	`\n</ButtonGroup>`;
const inverse = componentProps['theme'] === 'inverse';
import {Code} from 'astro:components';

let figma =
	'https://www.figma.com/files/938480807921629744/team/1237702133754424766/Origami-for-Everyone-(NEW)?fuid=840167457508775739';
switch (brand) {
	case 'core':
		figma =
			'https://www.figma.com/design/VVM0PixrY3IRZq2ZUTdWfU/%F0%9F%92%A0-Core---Origami-(o3)?node-id=6605-826&t=mPp0f1R2Bgyi54UE-4';
		break;
	case 'professional':
		figma =
			'https://www.figma.com/design/qfi6fTq5V05b0mnXw3F7q5/%F0%9F%92%A0-Professional---Origami-(o3)?node-id=4173-834&t=mPp0f1R2Bgyi54UE-4';
		break;
	case 'internal':
		figma =
			'https://www.figma.com/design/H9vTWZgEzqzTtX689nwq4R/%F0%9F%92%A0-Internal---Origami-(o3)?node-id=5545-1833&t=mPp0f1R2Bgyi54UE-4';
		break;
	case 'sustainable-views':
		figma =
			'https://www.figma.com/design/Y7u0SwIJ1mCNDE0dpzgHCJ/%F0%9F%92%A0-Sustainable-Views---Origami-(o3)?node-id=6294-955&t=mPp0f1R2Bgyi54UE-4';
		break;

	default:
		break;
}

let storybook = 'https://o3.origami.ft.com';
if (brand) {
	const storybookArgs = `grouped-buttons`;
	const storybookbase = 'https://o3.origami.ft.com?path=/story';
	storybook = `${storybookbase}/${brand}-o3-button--${storybookArgs}`;

	if (brand === 'professional') {
		storybook = `${storybookbase}/core-${brand}-o3-button--${storybookArgs}`;
	}
}
---

<div>
	<div
		style={`padding: var(--o3-spacing-2xs); margin-left: calc(var(--o3-spacing-2xs) * -1); ${
			inverse ? 'background-color: black' : ''
		}`}
	>
		<div class="not-content">
			<Fragment set:html={componentHtml} />
		</div>
		<a
			style="display: inline-block; margin: var(--o3-spacing-2xs) 0;"
			href={storybook}
		>
			Open in StoryBook
		</a> | <a
			style="display: inline-block; margin: var(--o3-spacing-2xs) 0;"
			href={figma}
		>
			Open in Figma
		</a>
		<details>
			<summary>code</summary>
			<Code code={componentJSX} lang="jsx" theme="css-variables" />
			<Code code={componentHtml} lang="html" theme="css-variables" />
		</details>
	</div>
</div>
