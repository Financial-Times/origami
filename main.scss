@import "o-brand/main";

@import "src/scss/variables";
@import "src/scss/functions";
@import "src/scss/mixins";

/// Output all default font-face declarations for the current brand.
///
/// @example Include all fonts for the current brand (master, internal, whitelabel).
///     @include oFonts();
///
/// @example Include a limited set of recommended fonts for the current brand (master, internal, whitelabel).
///     @include oFonts($opts: ('recommended': true));
///
/// @example Include a limited set of recommended fonts for the current brand, plus an extra FinancierDisplayWeb font.
/// 	@include oFonts($opts: (
/// 		'recommended': true,
/// 		'financier-display': (
/// 			(weight: regular, style: normal)
/// 		)
/// 	));
///
/// @example Include only regular and semibold MetricWeb font faces.
///     @include oFonts($opts: ('metric': (
///     	(weight: regular, style: normal),
///     	(weight: semibold, style: normal),
///     )));
///
/// @example Include only regular and bold FinancierDisplayWeb font faces.
///     @include oFonts($opts: ('financier-display': (
///     	(weight: regular, style: normal),
///     	(weight: semibold, style: normal),
///     )));
///
/// @example Include only regular font faces for MetricWeb and FinancierDisplayWeb.
///     @include oFonts($opts: (
///     	'metric': ((weight: regular, style: normal)),
///     	'financier-display': ((weight: regular, style: normal))
///     ));
@mixin oFonts($opts: $_o-fonts-default) {
	// Map of options to font name.
	$fonts: (
		'metric': 'MetricWeb',
		'financier-display': 'FinancierDisplayWeb'
	);
	// Include each font variant given.
	@each $option, $family in $fonts {
		// Get font variants to include from the opt map by font family.
		$variants: map-get($opts, $option);
		$variants: if($variants, $variants, ());
		// Merge recommended font variants if recommended fonts were requested.
		@if map-get($opts, 'recommended') == true {
			$recommended-variants: map-get($_o-fonts-recommended, $option);
			@if length($variants) > 0 {
				$variants: append($recommended-variants, $variants);
			} @else {
				$variants: $recommended-variants;
			}
		}
		@each $variant in $variants {
			// Validate that the variant style and weight is given.
			$weight: map-get($variant, 'weight');
			$style: map-get($variant, 'style');
			@if(type-of($weight) != 'string') {
				@error 'Could not include the "#{$family}" font with weight "#{inspect($weight)}". Excepted a string.';
			}
			@if(type-of($style) != 'string') {
				@error 'Could not include the "#{$family}" font with style "#{inspect($style)}". Excepted a string.';
			}
			// Include the font face for this variant.
			@include _oFontsInclude($family, $weight, $style);
		}
	}
}

@if ($o-fonts-is-silent == false) {
	@include oFonts();
}
