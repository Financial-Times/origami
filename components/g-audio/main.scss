@import '@financial-times/o-icons/main';
@import '@financial-times/o-colors/main';
@import 'src/scss/variables';

// Teal theme mixin
@mixin teal-theme {
  $g-audio-button-background: $g-audio-teal-button-background !global;
  $g-audio-button-background-hover: $g-audio-teal-button-background-hover !global;
  $g-audio-button-color: $g-audio-teal-button-color !global;

  $g-audio-content-background: $g-audio-teal-content-background !global;
  $g-audio-content-color: $g-audio-teal-content-color !global;
}

// Pink theme mixin
@mixin pink-theme {
  $g-audio-button-background: $g-audio-pink-button-background !global;
  $g-audio-button-background-hover: $g-audio-pink-button-background-hover !global;
  $g-audio-button-color: $g-audio-pink-button-color !global;

  $g-audio-content-background: $g-audio-pink-content-background !global;
  $g-audio-content-color: $g-audio-pink-content-color !global;
}

/// Output all gAudio features
/// @param {Map} $opts [()] - A map of options to configure the output
/// @access public
@mixin gAudio($opts: (
  'theme': 'pink',
)) {
  $theme: map-get($opts, 'theme');
  @if $theme == 'pink' {
    @include pink-theme;
  } @else if $theme == 'teal' {
    @include teal-theme;
  }

	// content of primary mixin
	.g-audio.g-audio--initialized {
		cursor: pointer;
		margin: 0 $g-audio-horz-margin;
		vertical-align: top;
	
		// inline player
	
		.g-audio--playbutton {
			background: $g-audio-button-background;
			color: $g-audio-button-color;
			padding: $g-audio-vert-padding-inline 0;

			&:hover {
				background: $g-audio-button-background-hover;
			}
		}
	
		.g-audio--playbutton:before {
			@include oIconsContent('play', $g-audio-button-color, 28);
			content: '';
			font-size: 1em;
			vertical-align: bottom;
		}
	
		&.g-audio-pause .g-audio--playbutton:before {
			@include oIconsContent('pause', $g-audio-button-color, 28);
			content: '';
			font-size: 1em;
			vertical-align: bottom;
		}
	
		.g-audio-content {
			background: $g-audio-content-background;
			color: $g-audio-content-color;
			display: inline;
			padding: $g-audio-vert-padding-inline $g-audio-horz-padding-inline;
			position: relative;
	
			.g-audio-content-progressbar {
				background: $g-audio-button-background;
				height: 1px;
				left: 0;
				pointer-events: none;
				position: absolute;
				bottom: 0;
				transition: width 0.1s ease;
			}

			&:hover .g-audio-content-progressbar {
				background: $g-audio-button-background-hover;

				&:after {
					content: "â€¢";
					color: $g-audio-button-background-hover;
					position: absolute;
					right: -1px;
					line-height: 0;
				}
			}
		}
	
	
		// block player
	
		&.g-audio--block {
			display: block;
			margin: 1em 0;
			padding: $g-audio-vert-padding-block 0;
			width: 100%;
	
			.g-audio--playbutton {
				background: $g-audio-button-background;
				color: $g-audio-button-color;
				padding: $g-audio-vert-padding-block $g-audio-horz-padding-inline;
			}
	
			.g-audio-content {
				padding: $g-audio-vert-padding-block $g-audio-horz-padding-block;
			}
		}
	
	}
	
}

@if ($g-audio-is-silent == false) {
	@include gAudio();

	// Set to silent again to avoid being output twice
	$g-audio-is-silent: true !global;
}
