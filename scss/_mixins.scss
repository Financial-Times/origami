//
// Prefixes and generates both silent placeholders and, if $o-dialog-is-silent == false, concrete classes for a list of classnames
// If $compound is set to true it will handle compund selectors too
//
// oDialogClass(row) => .o-dialog-row, %o-dialog-row
// oDialogClass(row col) => .o-dialog-row, %o-dialog-row, .o-dialog-col, %o-dialog-col
// oDialogClass((row col, box), true) => .o-dialog-row .o-dialog-col, %o-dialog-row %o-dialog-col, .o-dialog-box, %o-dialog-box
//
@function oDialogClass ($classes, $compound: false) {
	$aggregated-selector: ();	
	
	@each $class in $classes {

		@if ($compound) {
			$loud-compound-selector: null;
			$silent-compound-selector: null;
			@each $part in $class {
				$silent-compound-selector: append($silent-compound-selector, #{'%o-dialog-#{$part}'});
		    }
		    $aggregated-selector: append($aggregated-selector, $silent-compound-selector, comma);
			@if (not $o-dialog-is-silent) {
				@each $part in $class {
					$loud-compound-selector: append($loud-compound-selector, #{'.o-dialog-#{$part}'});
				}
				$aggregated-selector: append($aggregated-selector, $loud-compound-selector, comma);
			}				
		} @else {

			$aggregated-selector: append($aggregated-selector, #{'%o-dialog-#{$class}'}, comma);
		  
			@if (not $o-dialog-is-silent) {
				$aggregated-selector: append($aggregated-selector, #{'.o-dialog-#{$class}'}, comma);
			}
		}
	}

	@return #{$aggregated-selector};
}

//
// Same as above but is immediately used to wrap some styles in the generated selector
//
@mixin oDialogClass ($classes, $compound: false) {
	@include oDialogWrapInSelector(oDialogClass($classes, $compound)) { 
		@content 
	}
}

//
// Wraps a bundle of styles in a given selector
// If a $selector is not provided the styles are printed out unaltered
// If $include-unwrapped is true then a copy of the unaltered styles is printed in addition to the wrapped styles
//
@mixin oDialogWrapInSelector ($selector:null, $include-unwrapped: false) {
	@if (not $selector or $include-unwrapped) {
		@content
	}

	@if($selector) {
		#{$selector} { @content }
 	} 
}