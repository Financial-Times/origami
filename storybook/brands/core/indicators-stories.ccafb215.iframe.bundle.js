"use strict";(self.webpackChunkorigami_storybook=self.webpackChunkorigami_storybook||[]).push([[9458],{"../../components/o-date/src/tsx/date.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{E:()=>Date,M:()=>DatePrinter});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/jsx-runtime.js");function Date(_ref){var dateTime=_ref.dateTime,format=_ref.format,children=_ref.children;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("time",{"data-o-component":"o-date",className:"o-date",dateTime,"data-o-date-format":format,children})}function DatePrinter(_ref2){var format=_ref2.format,children=_ref2.children;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{"data-o-date-printer":!0,"data-o-date-format":format,children})}try{Date.displayName="Date",Date.__docgenInfo={description:"",displayName:"Date",props:{dateTime:{defaultValue:null,description:"",name:"dateTime",required:!0,type:{name:"string"}},format:{defaultValue:null,description:"",name:"format",required:!1,type:{name:"DateFormat"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../../components/o-date/src/tsx/date.tsx#Date"]={docgenInfo:Date.__docgenInfo,name:"Date",path:"../../components/o-date/src/tsx/date.tsx#Date"})}catch(__react_docgen_typescript_loader_error){}try{DatePrinter.displayName="DatePrinter",DatePrinter.__docgenInfo={description:"",displayName:"DatePrinter",props:{format:{defaultValue:null,description:"",name:"format",required:!1,type:{name:"DateFormat"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../../components/o-date/src/tsx/date.tsx#DatePrinter"]={docgenInfo:DatePrinter.__docgenInfo,name:"DatePrinter",path:"../../components/o-date/src/tsx/date.tsx#DatePrinter"})}catch(__react_docgen_typescript_loader_error){}try{Date.displayName="Date",Date.__docgenInfo={description:"",displayName:"Date",props:{dateTime:{defaultValue:null,description:"",name:"dateTime",required:!0,type:{name:"string"}},format:{defaultValue:null,description:"",name:"format",required:!1,type:{name:"DateFormat"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../../components/o-date/src/tsx/date.tsx#Date"]={docgenInfo:Date.__docgenInfo,name:"Date",path:"../../components/o-date/src/tsx/date.tsx#Date"})}catch(__react_docgen_typescript_loader_error){}try{DatePrinter.displayName="DatePrinter",DatePrinter.__docgenInfo={description:"",displayName:"DatePrinter",props:{format:{defaultValue:null,description:"",name:"format",required:!1,type:{name:"DateFormat"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../../components/o-date/src/tsx/date.tsx#DatePrinter"]={docgenInfo:DatePrinter.__docgenInfo,name:"DatePrinter",path:"../../components/o-date/src/tsx/date.tsx#DatePrinter"})}catch(__react_docgen_typescript_loader_error){}},"../../components/o-labels/stories/core/indicators.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__,LiveIndicatorLabel:()=>LiveIndicatorLabel,ClosedIndicatorLabel:()=>ClosedIndicatorLabel,NewIndicatorLabel:()=>NewIndicatorLabel,UpdatedIndicatorLabel:()=>UpdatedIndicatorLabel});__webpack_require__("../../node_modules/core-js/modules/es.object.keys.js"),__webpack_require__("../../node_modules/core-js/modules/es.symbol.js"),__webpack_require__("../../node_modules/core-js/modules/es.array.filter.js"),__webpack_require__("../../node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),__webpack_require__("../../node_modules/core-js/modules/es.array.for-each.js"),__webpack_require__("../../node_modules/core-js/modules/web.dom-collections.for-each.js"),__webpack_require__("../../node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),__webpack_require__("../../node_modules/core-js/modules/es.object.define-properties.js"),__webpack_require__("../../node_modules/core-js/modules/es.object.define-property.js"),__webpack_require__("../../node_modules/core-js/modules/es.array.is-array.js"),__webpack_require__("../../node_modules/core-js/modules/es.date.to-iso-string.js"),__webpack_require__("../../node_modules/core-js/modules/es.date.to-string.js"),__webpack_require__("../../node_modules/core-js/modules/es.function.bind.js"),__webpack_require__("../../node_modules/core-js/modules/es.date.now.js");var _financial_times_o_date_main__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("../../components/o-date/main.js"),_financial_times_o_date_src_tsx_date__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("../../components/o-date/src/tsx/date.tsx"),origami_storybook_addon_html__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("./addons/html/index.js"),react__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("../../node_modules/react/index.js"),storybook_addon_designs__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("../../node_modules/storybook-addon-designs/esm/index.js"),_src_tsx_label__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("../../components/o-labels/src/tsx/label.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__=(__webpack_require__("../../components/o-labels/stories/labels.scss"),__webpack_require__("../../node_modules/react/jsx-runtime.js"));function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}const __WEBPACK_DEFAULT_EXPORT__={title:"Components/o-labels",component:_src_tsx_label__WEBPACK_IMPORTED_MODULE_19__.EP,decorators:[storybook_addon_designs__WEBPACK_IMPORTED_MODULE_18__.Z6,origami_storybook_addon_html__WEBPACK_IMPORTED_MODULE_16__.Z],argTypes:{inverse:{control:"boolean",defaultValue:!1},dateTime:{control:"date"},timestamp:{table:{disable:!0}},indicator:{table:{disable:!0}}}};var Template=function Template(args){(0,react__WEBPACK_IMPORTED_MODULE_17__.useEffect)((function(){var dates=_financial_times_o_date_main__WEBPACK_IMPORTED_MODULE_14__.Z.init();return function cleanup(){(dates=Array.isArray(dates)?dates:[dates]).forEach((function(date){return date.destroy()}))}}));var dateString=args.dateTime&&new Date(args.dateTime).toISOString();return dateString&&(args.timestamp=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx)(_financial_times_o_date_src_tsx_date__WEBPACK_IMPORTED_MODULE_15__.E,{dateTime:dateString})),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx)(_src_tsx_label__WEBPACK_IMPORTED_MODULE_19__.EP,_objectSpread({},args))},LiveIndicatorLabel=Template.bind({});LiveIndicatorLabel.args={indicator:"live",status:"live",badge:!1},LiveIndicatorLabel.argTypes={dateTime:{table:{disable:!0}}};var ClosedIndicatorLabel=Template.bind({});ClosedIndicatorLabel.args={indicator:"closed",status:"closed",badge:!1},ClosedIndicatorLabel.argTypes={dateTime:{table:{disable:!0}}};var NewIndicatorLabel=Template.bind({});NewIndicatorLabel.args={indicator:"new",status:"new",badge:!1,dateTime:Date.now()},NewIndicatorLabel.argTypes={badge:{table:{disable:!0}}};var UpdatedIndicatorLabel=Template.bind({});UpdatedIndicatorLabel.args={indicator:"updated",status:"updated",dateTime:Date.now()},UpdatedIndicatorLabel.argTypes={badge:{table:{disable:!0}}},LiveIndicatorLabel.parameters=_objectSpread({storySource:{source:"args => {\n\tuseEffect(() => {\n\t\tlet dates = ODate.init();\n\t\treturn function cleanup() {\n\t\t\tdates = Array.isArray(dates) ? dates : [dates];\n\t\t\tdates.forEach(date => date.destroy());\n\t\t};\n\t});\n\tconst dateString = args.dateTime && new Date(args.dateTime).toISOString()\n\tif(dateString) {\n\t\targs.timestamp =  <DateTSX dateTime={dateString} />;\n\t}\n\treturn <OIndicatorLabel {...args} />;\n}"}},LiveIndicatorLabel.parameters),ClosedIndicatorLabel.parameters=_objectSpread({storySource:{source:"args => {\n\tuseEffect(() => {\n\t\tlet dates = ODate.init();\n\t\treturn function cleanup() {\n\t\t\tdates = Array.isArray(dates) ? dates : [dates];\n\t\t\tdates.forEach(date => date.destroy());\n\t\t};\n\t});\n\tconst dateString = args.dateTime && new Date(args.dateTime).toISOString()\n\tif(dateString) {\n\t\targs.timestamp =  <DateTSX dateTime={dateString} />;\n\t}\n\treturn <OIndicatorLabel {...args} />;\n}"}},ClosedIndicatorLabel.parameters),NewIndicatorLabel.parameters=_objectSpread({storySource:{source:"args => {\n\tuseEffect(() => {\n\t\tlet dates = ODate.init();\n\t\treturn function cleanup() {\n\t\t\tdates = Array.isArray(dates) ? dates : [dates];\n\t\t\tdates.forEach(date => date.destroy());\n\t\t};\n\t});\n\tconst dateString = args.dateTime && new Date(args.dateTime).toISOString()\n\tif(dateString) {\n\t\targs.timestamp =  <DateTSX dateTime={dateString} />;\n\t}\n\treturn <OIndicatorLabel {...args} />;\n}"}},NewIndicatorLabel.parameters),UpdatedIndicatorLabel.parameters=_objectSpread({storySource:{source:"args => {\n\tuseEffect(() => {\n\t\tlet dates = ODate.init();\n\t\treturn function cleanup() {\n\t\t\tdates = Array.isArray(dates) ? dates : [dates];\n\t\t\tdates.forEach(date => date.destroy());\n\t\t};\n\t});\n\tconst dateString = args.dateTime && new Date(args.dateTime).toISOString()\n\tif(dateString) {\n\t\targs.timestamp =  <DateTSX dateTime={dateString} />;\n\t}\n\treturn <OIndicatorLabel {...args} />;\n}"}},UpdatedIndicatorLabel.parameters)},"../../components/o-date/main.js":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>main});__webpack_require__("../../node_modules/core-js/modules/web.timers.js"),__webpack_require__("../../node_modules/core-js/modules/es.date.to-string.js"),__webpack_require__("../../node_modules/core-js/modules/es.array.map.js"),__webpack_require__("../../node_modules/core-js/modules/es.object.define-property.js"),__webpack_require__("../../node_modules/core-js/modules/es.array.slice.js"),__webpack_require__("../../node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("../../node_modules/core-js/modules/es.function.name.js"),__webpack_require__("../../node_modules/core-js/modules/es.array.from.js"),__webpack_require__("../../node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("../../node_modules/core-js/modules/es.symbol.js"),__webpack_require__("../../node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("../../node_modules/core-js/modules/es.symbol.iterator.js"),__webpack_require__("../../node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("../../node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("../../node_modules/core-js/modules/es.array.is-array.js");var ft_date_format=__webpack_require__("../../node_modules/@financial-times/ft-date-format/index.js");function _createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var interval;function ftDateFormatWarning(methodName){console.warn('The o-date method "'+methodName+'" is deprecated. Use the "ft-date-format" package instead or contact the Origami team for help: https://github.com/Financial-Times/ft-date-format')}var ODate=function(){function ODate(rootEl){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ODate),rootEl||console.warn("To initialise all o-date elements on the page use the `init` method. Passing no arguments to the constructor is deprecated."),!rootEl||rootEl instanceof HTMLElement||console.warn("Using the constructor to initialise one or more o-date elements with a query selector is deprecated. Pass a single o-date HTMLElement to initialise or use the `init` method."),rootEl?rootEl instanceof HTMLElement||(rootEl=document.querySelector(rootEl)):rootEl=document.body,"o-date"===rootEl.getAttribute("data-o-component")?this.el=rootEl:this.el=rootEl.querySelector('[data-o-component~="o-date"]'),this.el&&(document.body.addEventListener("update",this),this.update(),this.el.setAttribute("data-o-date-js","")),this.el&&!interval&&(interval=setInterval((function(){document.body.dispatchEvent(new CustomEvent("update"))}),6e4))}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(ODate,[{key:"handleEvent",value:function handleEvent(e){"update"===e.type&&this.update()}},{key:"update",value:function update(){var el=this.el,dateTime=el.getAttribute("datetime"),date=dateTime?ft_date_format.toDate(dateTime):null;if(date||""!==this.el.textContent||(date=new Date),date){var _step,printers=el.querySelectorAll(".o-date__printer,[data-o-date-printer]"),_iterator=_createForOfIteratorHelper(printers=printers.length?printers:[el]);try{for(_iterator.s();!(_step=_iterator.n()).done;){var printer=_step.value;this._renderDateFor(printer,date)}}catch(err){_iterator.e(err)}finally{_iterator.f()}el.textContent?(el.setAttribute("title",ft_date_format.format(date,"datetime")),el.removeAttribute("aria-hidden")):el.setAttribute("aria-hidden",!0)}}},{key:"destroy",value:function destroy(){document.body.removeEventListener("update",this),this.el=null}},{key:"_renderDateFor",value:function _renderDateFor(printer,date){var formattedDate,format=printer.getAttribute("data-o-date-format")||this.el.getAttribute("data-o-date-format");"today-or-yesterday-or-nothing"===format?formattedDate=ft_date_format.asTodayOrYesterdayOrNothing(date):"date-only"===format?formattedDate=ft_date_format.format(date,"date"):"time-ago-limit-4-hours"===format?formattedDate=ft_date_format.timeAgo(date,{limit:4*ft_date_format.inSeconds.hour}):"time-ago-limit-24-hours"===format?formattedDate=ft_date_format.timeAgo(date,{limit:24*ft_date_format.inSeconds.hour}):"time-ago-abbreviated"===format?(console.warn('The o-date format "time-ago-abbreviated" is deprecated and the time is no longer abbreviated. Consider using "time-ago-limit-4-hours" instead.'),formattedDate=ft_date_format.timeAgo(date)):"time-ago-abbreviated-limit-4-hours"===format?(console.warn('The o-date format "time-ago-abbreviated-limit-4-hours" is deprecated and the time is no longer abbreviated. Use "time-ago-limit-4-hours" instead.'),formattedDate=ft_date_format.timeAgo(date,{limit:4*ft_date_format.inSeconds.hour})):formattedDate="time-ago-no-seconds"===format?ft_date_format.timeAgoNoSeconds(date):null!==format?ft_date_format.format(date,format):ft_date_format.ftTime(date),1===printer.childNodes.length&&printer.firstChild&&3===printer.firstChild.nodeType?printer.firstChild.nodeValue=formattedDate:printer.innerHTML=formattedDate}}],[{key:"init",value:function init(el){if(el||(el=document.body),el instanceof HTMLElement||(el=document.querySelector(el)),/\bo-date\b/.test(el.getAttribute("data-o-component")))return new ODate(el);var dateEls=el.querySelectorAll('[data-o-component~="o-date"]');return[].map.call(dateEls,(function(el){return new ODate(el)}))}},{key:"toDate",value:function toDate(){return ftDateFormatWarning("toDate"),ft_date_format.toDate.apply(ft_date_format,arguments)}},{key:"format",value:function format(){return ftDateFormatWarning("format"),ft_date_format.format.apply(ft_date_format,arguments)}},{key:"getSecondsBetween",value:function getSecondsBetween(){return ftDateFormatWarning("getSecondsBetween"),ft_date_format.getSecondsBetween.apply(ft_date_format,arguments)}},{key:"ftTime",value:function ftTime(){return ftDateFormatWarning("ftTime"),ft_date_format.ftTime.apply(ft_date_format,arguments)}},{key:"isNearFuture",value:function isNearFuture(){return ftDateFormatWarning("isNearFuture"),ft_date_format.isNearFuture.apply(ft_date_format,arguments)}},{key:"isFarFuture",value:function isFarFuture(){return ftDateFormatWarning("isFarFuture"),ft_date_format.isFarFuture.apply(ft_date_format,arguments)}},{key:"isToday",value:function isToday(){return ftDateFormatWarning("isToday"),ft_date_format.isToday.apply(ft_date_format,arguments)}},{key:"isYesterday",value:function isYesterday(){return ftDateFormatWarning("isYesterday"),ft_date_format.isYesterday.apply(ft_date_format,arguments)}},{key:"timeAgo",value:function timeAgo(){return ftDateFormatWarning("timeAgo"),ft_date_format.timeAgo.apply(ft_date_format,arguments)}},{key:"asTodayOrYesterdayOrNothing",value:function asTodayOrYesterdayOrNothing(){return ftDateFormatWarning("asTodayOrYesterdayOrNothing"),ft_date_format.asTodayOrYesterdayOrNothing.apply(ft_date_format,arguments)}},{key:"timeAgoNoSeconds",value:function timeAgoNoSeconds(){return ftDateFormatWarning("timeAgoNoSeconds"),ft_date_format.timeAgoNoSeconds.apply(ft_date_format,arguments)}}]),ODate}();const date=ODate;"undefined"!=typeof document&&document.addEventListener("o.DOMContentLoaded",(function constructAll(){date.init(),document.removeEventListener("o.DOMContentLoaded",constructAll)}));const main=date}}]);