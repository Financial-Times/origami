<!DOCTYPE html>
<html lang="en-GB" class="core o-typography--loading-sans o-typography--loading-sans-bold o-typography--loading-display o-typography--loading-display-bold" data-o-component="o-typography">
<head>

	<!-- Page meta-information -->
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<title>Create A New Origami Component - Part 6 Storybook</title>
	<meta name="description" content="A step-by-step tutorial which teaches you how to build and deploy a new Origami component." />

	<!-- Cuts the mustard test -->
	<script>
		var cutsTheMustard = ('querySelector' in document && 'localStorage' in window && 'addEventListener' in window);
		if (cutsTheMustard) {
			document.documentElement.className = document.documentElement.className.replace(/\bcore\b/g, 'enhanced');
		}
	</script>

	<!-- Favicons -->
	<link rel="icon" type="image/svg+xml" href="https://www.ft.com/__origami/service/image/v2/images/raw/ftlogo-v1%3Aorigami?source=origami-docs&format=svg" sizes="any">
	<link rel="alternate icon" type="image/png" href="https://www.ft.com/__origami/service/image/v2/images/raw/ftlogo-v1%3Aorigami?source=origami-docs&width=16&height=16&format=png" sizes="16x16">
	<link rel="alternate icon" type="image/png" href="https://www.ft.com/__origami/service/image/v2/images/raw/ftlogo-v1%3Aorigami?source=origami-docs&width=32&height=32&format=png" sizes="32x32">
	<link rel="alternate icon" type="image/png" href="https://www.ft.com/__origami/service/image/v2/images/raw/ftlogo-v1%3Aorigami?source=origami-docs&width=96&height=96&format=png" sizes="96x96">
	<link rel="alternate icon" type="image/png" href="https://www.ft.com/__origami/service/image/v2/images/raw/ftlogo-v1%3Aorigami?source=origami-docs&width=128&height=128&format=png" sizes="128x128">
	<link rel="alternate icon" type="image/png" href="https://www.ft.com/__origami/service/image/v2/images/raw/ftlogo-v1%3Aorigami?source=origami-docs&width=196&height=196&format=png" sizes="196x196">
	<link rel="alternate icon" type="image/png" href="https://www.ft.com/__origami/service/image/v2/images/raw/ftlogo-v1%3Aorigami?source=origami-docs&width=310&height=310&format=png" sizes="310x310">

	<!-- Site links -->
	<link rel="sitemap" type="application/xml" href="/sitemap.xml" title="Sitemap" />
	<link rel="canonical" href="https://origami.ft.com/documentation/tutorials/create-a-new-component-part-6/" />

	<!-- Feed -->
	<link type="application/atom+xml" rel="alternate" href="https://origami.ft.com/feed.xml" title="Origami Newsletter" />

	<!-- Progressive Font Loading -->
	<!-- https://github.com/Financial-Times/o-typography/tree/v6.1.3#setup-progressive-loading -->
	<script>
		var rootElement = document.querySelector('html')
		if (/(^|\s)o-typography-fonts-loaded=1(;|$)/.test(document.cookie)) {
			var fontLabels = ['sans', 'sans-bold', 'display', 'display-bold']
			for (var i = 0; i < fontLabels.length; i++) {
				rootElement.className = rootElement.className.replace('o-typography--loading-' + fontLabels[i], '')
			}
		}
	</script>

	<!-- Styles -->
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<style>
		/* Hide any enhanced experience content when in core mode, and vice versa. */
		.core .o--if-js,
		.enhanced .o--if-no-js {
			display: none !important;
		}
	</style>
	<link rel="stylesheet" href="https://www.ft.com/__origami/service/build/v3/bundles/css?components=o-normalise@^3.0.3,o-typography@^7.0.3,o-layout@^5.0.6,o-header-services@^5.1.0,o-footer-services@^4.0.3,o-syntax-highlight@^4.0.1,o-message@^5.1.0,o-table@^9.0.3,o-autoinit@^3.0.1&brand=internal&system_code=origami" />
	<link rel="stylesheet" href="/assets/main.css" />

	<!-- JS -->
	<script>
		(function(src) {
			if (cutsTheMustard) {
				var o = document.createElement('script');
				o.async = o.defer = true;
				o.src = src;
				var s = document.getElementsByTagName('script')[0];
				s.parentNode.insertBefore(o, s);
			}
		}('https://www.ft.com/__origami/service/build/v3/bundles/js?components=o-normalise@^3.1.0,o-typography@^7.1.0,o-layout@^5.1.0,o-header-services@^5.1.0,o-footer-services@^4.1.0,o-syntax-highlight@^4.1.0,o-message@^5.1.0,o-table@^9.1.0,o-autoinit@^3.0.1&system_code=origami'));
	</script>
</head>
<body>
	<div class="o-layout o-layout--docs" data-o-component="o-layout" data-o-layout-nav-heading-selector="h1, h2">
		
		<div class="o-layout__header">
			
<header class="o-header-services" data-o-component="o-header-services">
	<div class="o-header-services__top">
			<div class="o-header-services__hamburger">
				<a class="o-header-services__hamburger-icon" href="#" role="button">
					<span class="o-header-services__visually-hidden">Open primary navigation</span>
				</a>
			</div>
		<a href="/" class="o-header-services__logo"><span class="o-header-services__visually-hidden">To homepage</span></a>
		<div class="o-header-services__title">
			<a class="o-header-services__product-name" href="/">Origami</a>
			<span class="o-header-services__product-tagline">Frontend Components &amp; Services</span>
		</div>
	</div>

	<nav class="o-header-services__primary-nav" aria-label="primary">
		<ul class="o-header-services__primary-nav-list">
			<li>
				<a href="/" >
					Home
				</a>
			</li>
			<li>
				<a href="/documentation/" >
					Documentation
				</a>
			</li>
			<li>
				<a href="https://registry.origami.ft.com/components"> Registry</a>
			</li>
			<li>
				<a href="/storybook/" >
					Storybook
				</li>
			</a>
		</li>
			<li>
				<a href="/blog/" >
					Blog
				</a>
			</li>
		</ul>
	</nav>



	

	
	<nav class="o-header-services__secondary-nav" aria-label="secondary" data-o-header-services-nav="">
		<div class="o-header-services__secondary-nav-content" data-o-header-services-nav-list="">
			<ol class="o-header-services__secondary-nav-list o-header-services__secondary-nav-list--ancestors" aria-label="Ancestor sections">
			
				<li>
					<a href="/documentation/" >
						Documentation
					</a>
				</li>
			

			
				<!-- Collection item page -->
				<li>
					
					<a href="/documentation/tutorials/">
						
							Tutorials
						
					</a>
				</li>
			

			
			</ol>

			<ul class="o-header-services__secondary-nav-list o-header-services__secondary-nav-list--children" aria-label="Child sections">
			

				

			
			</ul>
		</div>
		<button class="o-header-services__scroll-button o-header-services__scroll-button--left" title="scroll left" aria-hidden="true" disabled></button>
		<button class="o-header-services__scroll-button o-header-services__scroll-button--right" title="scroll right" aria-hidden="true" disabled></button>
	</nav>
	
</header>

		</div>
		

		<div class="o-layout__sidebar"></div>

<div class="o-layout__main o-layout-typography" data-o-component="o-syntax-highlight">
	<h1 id="create-a-new-origami-component---part-6-storybook">Create A New Origami Component - Part 6 Storybook</h1>

<p>The “Create A New Origami Component” tutorial is split into nine parts and is intended to be followed sequentially from start to finish:</p>
<ol>
  <li><a href="/documentation/tutorials/create-a-new-component-part-1/">Intro &amp; Boilerplate</a></li>
  <li><a href="/documentation/tutorials/create-a-new-component-part-2/">Base Styles</a></li>
  <li><a href="/documentation/tutorials/create-a-new-component-part-3/">Themes &amp; Brands</a></li>
  <li><a href="/documentation/tutorials/create-a-new-component-part-4/">Demos</a></li>
  <li><a href="/documentation/tutorials/create-a-new-component-part-5/">JavaScript</a></li>
  <li>Storybook</li>
  <li><a href="/documentation/tutorials/create-a-new-component-part-7/">Testing</a></li>
  <li><a href="/documentation/tutorials/create-a-new-component-part-8/">Documentation</a></li>
  <li><a href="/documentation/tutorials/create-a-new-component-part-9/">Component Lifecycle</a></li>
</ol>

<p>In part six we will rewrite <code class="language-plaintext highlighter-rouge">demo.mustache</code> into tsx template, we will use our component’s javascript code to initialise interactivity for storybook demos and implement all the variants of our component.</p>

<h2 id="storybook">Storybook</h2>

<p>We are aiming to replace the Origami Registry that is currently used to view demos and documentation for Origami components with a new Storybook interface. The reasoning behind choosing Storybook is that it is a well known and widely used tool for documenting and making highly interactive UI demos. Storybook demos are written in <a href="https://reactjs.org/docs/introducing-jsx.html">JSX</a> and can be written in JavaScript or TypeScript. JSX is a syntax extension to JavaScript that allows you to write HTML-like code in JavaScript. It is a very powerful tool that allows you to write highly interactive demos and documentation for your component. It is also a very popular tool that is mostly used by <a href="https://reactjs.org/">React</a> (the most popular javascript framework) developers.</p>

<p>Our TSX (JSX + <a href="https://www.typescriptlang.org/">typeScript</a>) templates don’t use React specific imports in them and we are leveraging <a href="https://reactjs.org/blog/2020/09/22/introducing-the-new-jsx-transform.html">JSX transform</a> which enables us to use JSX without importing React and therefore making it somewhat framework agnostic.</p>

<p>To run storybook locally run <code class="language-plaintext highlighter-rouge">npm run storybook</code> from your root directory. This will start a localhost server automatically.</p>
<figure>
	<img alt="" src="/assets/images/tutorial-new-component/hello-world-demo-23-storybook.png" />
	<figcaption>
        A list of storybook components. There should be o-example displayed in the side navigation bar.
	</figcaption>
</figure>

<h2 id="styles">Styles</h2>

<p>Once the storybook dev server is running we notice that some styles are already applied to our component. This is coming from <code class="language-plaintext highlighter-rouge">o-example/stories/example.scss</code> file which is imported by <code class="language-plaintext highlighter-rouge">example.stories.tsx</code>. <code class="language-plaintext highlighter-rouge">example.stories.tsx</code> is where we define our demos and its variants, <a href="https://storybook.js.org/docs/react/essentials/controls#gatsby-focus-wrapper">controls</a> and anything related to storybook demos.</p>

<h2 id="brands">Brands</h2>

<p>When we were working on <a href="/documentation/tutorials/create-a-new-component-part-3/#component-brands">implementing brand</a> variants for our component we noticed that our build server generated different <code class="language-plaintext highlighter-rouge">html</code> files for us and we could swap between them. In storybook we will need to restart our dev server and provide an environment variable. To start internal component demos in storybook you will need to run <code class="language-plaintext highlighter-rouge">ORIGAMI_STORYBOOK_BRAND=internal npm run storybook</code> and similarly for whitelababel you can run <code class="language-plaintext highlighter-rouge">ORIGAMI_STORYBOOK_BRAND=whitelabel npm run storybook</code>.</p>
<h2 id="tsx-template">TSX template</h2>
<p><code class="language-plaintext highlighter-rouge">npm run create-component</code> generated a TSX (<a href="https://reactjs.org/docs/jsx-in-depth.html">JSX</a> + <a href="https://www.typescriptlang.org/docs/handbook/basic-types.html">typeScript</a>) boilerplate template as well.</p>

<p>The code in <code class="language-plaintext highlighter-rouge">example.tsx</code> will be very similar to what we have in <code class="language-plaintext highlighter-rouge">demo.mustache</code> but with different syntax:</p>

<pre><code class="o-syntax-highlight--js">// src/tsx/example.tsx

type ExampleProps = {
	theme: string
}

export function Example({theme}: {theme: ExampleProps}) {
	const classNames = theme ? `o-example o-example--${theme}` : 'o-example'
	return (
		&lt;div id="element" className={classNames} data-o-component="o-example"&gt;
			Hello world, I am a component named o-example!
			&lt;span className="o-example__counter"&gt;
				You have clicked this lovely button &lt;span data-o-example-current-count&gt;0&lt;/span&gt; times.
				&lt;button className="o-example__button"&gt;count&lt;/button&gt;
			&lt;/span&gt;
		&lt;/div&gt;
	)
}
</code></pre>

<p>But let’s break this down a bit and compare it to the <code class="language-plaintext highlighter-rouge">demo.mustache</code> file.</p>
<ol>
  <li>First thing we notice is <code class="language-plaintext highlighter-rouge">ExampleProps</code> <a href="https://www.typescriptlang.org/docs/handbook/basic-types.html">type declaration</a> for our <a href="https://reactjs.org/docs/components-and-props.html">component props</a>. This type declaration is used to make sure that our component is given an object argument with a <code class="language-plaintext highlighter-rouge">theme</code> property of type string.</li>
  <li>Second thing we notice is that we are using the <a href="https://reactjs.org/docs/jsx-in-depth.html">JSX syntax</a> to write our component and return it from the <code class="language-plaintext highlighter-rouge">Example</code> function.</li>
  <li>Syntax for <a href="https://reactjs.org/docs/jsx-in-depth.html">JSX</a> and Mustache are slightly different. In <a href="https://reactjs.org/docs/jsx-in-depth.html">JSX</a> we use <code class="language-plaintext highlighter-rouge">className</code> instead of <code class="language-plaintext highlighter-rouge">class</code> and we are passing theme prop to our JSX using literal string (<code class="language-plaintext highlighter-rouge">${theme}</code>) syntax.</li>
</ol>

<figure>
	<img alt="" src="/assets/images/tutorial-new-component/hello-world-demo-24-storybook.png" />
	<figcaption>
        Example demo in storybook.
	</figcaption>
</figure>

<h2 id="adding-button">Adding button</h2>

<p>Our demo is missing the count button and it’s related sentence. When we discussed <a href="/documentation/tutorials/create-a-new-component-part-5/#browser-support">browser support</a> we decided to display count functionality if JS was enabled. In this case we have written a TSX template but never initialised components javascript. To do so we will need to update our <code class="language-plaintext highlighter-rouge">example.stories.tsx</code> file by adding the following code:</p>

<pre><code class="o-syntax-highlight--diff">// stories/example.stories.tsx

+ import {useEffect} from 'react';
+ import javascript from '../main';
// ....

- const ExampleStory = args =&gt; &lt;Example {...args} /&gt;;
+ const ExampleStory = args =&gt; {
+	 useEffect(() =&gt; {
+		javascript.init()
+	 })
+	 return &lt;Example {...args} /&gt;
+ };
// ....
</code></pre>

<p>First of all we will need to import <a href="https://reactjs.org/docs/hooks-effect.html"><code class="language-plaintext highlighter-rouge">useEffect</code> hook</a> from React. Component TSX templates aim to make no framework assumption, so Origami users can benefit from templates in production whilst using other frameworks such as React. Our Storybook demos on the other hand are private and are not included in other projects, these are written specifically in React. Initialising component javascript with <code class="language-plaintext highlighter-rouge">useEffect</code> should display the count button and number of times it was clicked.</p>

<figure>
	<img alt="" src="/assets/images/tutorial-new-component/hello-world-demo-25-storybook.png" />
	<figcaption>
        Example demo in storybook that also has counter functionality working.
	</figcaption>
</figure>

<h2 id="theming">Theming</h2>

<p>We already discussed how to run different brands in storybook but we still need to cover the theming part. This is the area where storybook really starts to shine. We provided theme as a prop for our JSX component and it would be amazing if we had a drop down where we could select a theme and immediately see how certain themes effect our component.</p>

<p>The code below dynamically creates labels and options for correct brand. We use Storybook controls to make theming easier, have better demos where experimenting is easier and developers can integrate correct version of component into their code.
The code below dynamically creates labels and options for the current brand. We use Storybook controls to have better demos where experimenting with component options and content is easier, allowing developers and designers to integrate Origami in their project.</p>

<pre><code class="o-syntax-highlight--diff">// stories/example.stories.tsx

// ....
export const DefaultExample: ComponentStory&lt;typeof Example&gt; = ExampleStory.bind(
 	{}
);

+ const themeOptions: string[] = ['', 'inverse']
+ const controlLabels: Record&lt;string, string&gt; = {
+ 	'': 'Default',
+ 	inverse: 'Inverse',
+ }
+
+ const Brand = process.env.ORIGAMI_STORYBOOK_BRAND || 'core';
+
+ if (Brand === 'core') {
+ 	themeOptions.push('b2c')
+ 	controlLabels.b2c = 'B2C'
+ }
+ DefaultExample.argTypes = {
+ 	theme: {
+ 		name: 'Theme',
+ 		options: themeOptions,
+ 		control: {
+ 			type: 'select',
+ 			labels: controlLabels
+ 		}
+ 	}
+ }
</code></pre>

<p>Implementing the above code should give us an option to choose between themes and apply them immediately once selected.</p>

<figure>
	<img alt="" src="/assets/images/tutorial-new-component/hello-world-demo-26-storybook.png" />
	<figcaption>
        Example demo in storybook with default theme.
	</figcaption>
</figure>

<figure>
	<img alt="" src="/assets/images/tutorial-new-component/hello-world-demo-27-storybook.png" />
	<figcaption>
        Example demo in storybook that has inverse theme applied on it.
	</figcaption>
</figure>

<figure>
	<img alt="" src="/assets/images/tutorial-new-component/hello-world-demo-28-storybook.png" />
	<figcaption>
        Example demo in storybook that has the b2c theme applied on it.
	</figcaption>
</figure>

<h2 id="part-six-storybook">Part six: Storybook</h2>

<p>In part six we learnt how to make a storybook demo for <code class="language-plaintext highlighter-rouge">o-example</code> component, covering:</p>
<ul>
  <li>How to start storybook server for development for different brands.</li>
  <li>What are TSX template and how to write them.</li>
  <li>Initialising component JavaScript in React.</li>
  <li>Using storybook controls to demo theming for the component.</li>
</ul>

<p>In part seven we’ll look at writing tests for our component. <a href="/documentation/tutorials/create-a-new-component-part-7">Continue to part seven</a>.</p>

</div>


		
		<div class="o-layout__footer">
			<footer class="o-footer-services">
	<div class="o-footer-services__container">
		<div class="o-footer-services__wrapper o-footer-services__wrapper--top">
			<a class="o-footer-services__icon-link o-footer-services__icon-link--github" href="https://github.com/Financial-Times/origami">View project on GitHub</a>
			<a class="o-footer-services__icon-link o-footer-services__icon-link--github" href="https://github.com/Financial-Times/origami/pulls?q=is%3Apr+is%3Aopen+sort%3Aupdated-desc">View proposals to Origami</a>
			<a class="o-footer-services__icon-link o-footer-services__icon-link--slack" href="https://financialtimes.slack.com/messages/origami-support">#origami-support</a>
			<p class="o-footer-services__content">Get in touch at <a href="mailto:origami.support@ft.com">origami.support@ft.com</a> for help or advice. Feel free to
				<a href='https://github.com/Financial-Times/origami/edit/main/apps/website/_tutorials/new-component/create-a-new-component-part-6.md'>suggest an edit to this page</a>.</p>
		</div>
	</div>
	<div class="o-footer-services__container">
		<div class="o-footer-services__wrapper o-footer-services__wrapper--legal">
			<div class="o-footer-services__links">
			<a href="https://help.ft.com/help/legal-privacy/cookies/">Cookies</a>
			<a href="https://help.ft.com/help/legal-privacy/copyright/copyright-policy/">Copyright</a>
			<a href="https://help.ft.com/help/legal-privacy/privacy/">Privacy</a>
			<a href="https://help.ft.com/help/legal-privacy/terms-conditions">Terms & Conditions</a>
			<a href="https://help.ft.com/legal-privacy/copyright-policy/">Slavery Statement & Policies</a>
		</div>
		<p><span>&copy; THE FINANCIAL TIMES LTD 2022.</span> FT and 'Financial Times' are trademarks of The Financial Times Ltd.</p>
	</div>
</footer>

		</div>
		
	</div>

	

</body>
</html>
