<h1 id="component-versioning">Component versioning</h1>

<p>The Origami team maintains and improves the components regularly. This means that we release new versions of the components frequently, and a component’s new version numbers follow the <abbr title="Semantic Versioning">semver</abbr> specification.</p>

<aside>You can find more information in the <a href="http://semver.org/" class="o-typography-link--external"><abbr title="Semantic Versioning">semver</abbr> specification</a></aside>

<h2 id="how-components-are-versioned">How components are versioned</h2>

<p>The version numbers are in the following format: <code class="language-plaintext highlighter-rouge">1.2.3</code>, which is representative of <code class="language-plaintext highlighter-rouge">MAJOR.MINOR.PATCH</code>.</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">MAJOR</code>: When a major is released, we refer to it as a breaking change. This usually means that we have made a drastic visual change, or a change that breaks backwards compatibility. When this changes, we will communicate the change and offer help with migration.</li>
  <li><code class="language-plaintext highlighter-rouge">MINOR</code>: When this number changes , we’ll have made an improvement, added a feature or made a noticeable design tweak, for example.</li>
  <li><code class="language-plaintext highlighter-rouge">PATCH</code>: When we release patches, we are usually releasing a bug fix that does not affect the components overall functionality.</li>
</ul>

<p><em>When a new <code class="language-plaintext highlighter-rouge">MAJOR</code> release affects many dependent components and projects we call this a <a href="/documentation/components/major-cascade/">major cascade</a>. It may require <a href="/documentation/components/major-cascade/">extra consideration and support</a> before release.</em></p>

<h2 id="how-to-request-a-versioned-component">How to request a versioned component</h2>

<p>We recommend requesting an Origami component by requesting a particular version range, which is indicated by a caret (<code class="language-plaintext highlighter-rouge">^</code>). That syntax will specify a version but will also fetch minor and patch releases in the future. So if you request <code class="language-plaintext highlighter-rouge">o-message@^2.3.0</code>, you will get <code class="language-plaintext highlighter-rouge">v2.3.0</code>. But when we release a minor (<code class="language-plaintext highlighter-rouge">v2.4.0</code>) of that component further down the line, it means you’ll automatically get that, too.</p>

<aside>With <abbr title="Semantic Versioning">semver</abbr> you can use different characters to <a href="https://semver.npmjs.com/" class="o-typography-link--external">specify different ranges</a></aside>

<p>By requesting a component’s version range, you’ll have an up-to-date component as soon as we release it.</p>

<h2 id="version-conflicts">Version conflicts</h2>

<p>Almost all Origami components are built on top of other Origami components.</p>

<p><a href="https://registry.origami.ft.com/components/o-message">o-message</a>, for example, relies on <a href="https://registry.origami.ft.com/components/o-message">o-buttons</a>, <a href="https://registry.origami.ft.com/components/o-colors">o-colors</a>, <a href="https://registry.origami.ft.com/components/o-icons">o-icons</a> and <a href="https://registry.origami.ft.com/components/o-typography">o-typography</a>, which in turn have Origami dependencies of their own, which generates an elaborate dependency tree:</p>

<pre><code class="o-syntax-highlight--bash">o-message
├── o-buttons
│   ├── o-colors
│   ├── o-icons
│   │   ├── fticons
│   │   └── o-assets
│   └── o-normalise
│       └── o-colors
├── o-colors
├── o-icons
│   ├── fticons
│   └── o-assets
└── o-typography
    ├── o-colors
    ├── o-fonts
    ├── o-grid
    └── o-icons
        ├── fticons
        └── o-assets</code></pre>

<p>Let’s use <code class="language-plaintext highlighter-rouge">o-colors</code> as an example.</p>

<p>The full <code class="language-plaintext highlighter-rouge">o-message</code> dependency tree requires <code class="language-plaintext highlighter-rouge">o-colors</code> <strong>four</strong> times. In order to avoid downloading four different versions of <code class="language-plaintext highlighter-rouge">o-colors</code>, we will flatten the dependencies and try to find a version of <code class="language-plaintext highlighter-rouge">o-colors</code> that all of the components requiring it can use. This is possible because <a href="#how-to-request-a-versioned-component">Origami components use <abbr title="Semantic Versioning">semver</abbr> ranges</a> to specify the versions of their dependencies.</p>

<p>However, this can also lead to situations where there is no single version that satisfies all <abbr title="Semantic Versioning">semver</abbr> ranges. This happens primarily when different ranges for the same component are specified.</p>

<p>If, for instance, <code class="language-plaintext highlighter-rouge">o-message</code> requires <code class="language-plaintext highlighter-rouge">o-colors@^2.3.4</code>, it will be compatible with any version between <code class="language-plaintext highlighter-rouge">v2.3.4</code> and below <code class="language-plaintext highlighter-rouge">v3.0.0</code>.</p>

<p>If the <code class="language-plaintext highlighter-rouge">o-typography</code> dependency required <code class="language-plaintext highlighter-rouge">o-colors@^1.2.3</code>, any version above and including <code class="language-plaintext highlighter-rouge">o-colors@2.0.0</code> won’t be compatible with the direct <code class="language-plaintext highlighter-rouge">o-colors</code> dependency (which is <code class="language-plaintext highlighter-rouge">v2.3.4</code> and above), and will cause a conflict.</p>

<p>The only way to fix these conflicts is to ensure that the dependencies and the dependencies within those dependencies are all requiring the <strong>same ranges</strong>.</p>
