<!DOCTYPE html><html lang="en-GB" class="core o-typography--loading-sans o-typography--loading-sans-bold o-typography--loading-display o-typography--loading-display-bold" data-o-component="o-typography"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Component versioning</title><meta name="description" content="An explanation of how Origami components are versioned, how to request different versions and resolve conflicts."><!-- Cuts the mustard test --><!-- Favicons --><link rel="icon" type="image/svg+xml" href="https://www.ft.com/__origami/service/image/v2/images/raw/ftlogo-v1%3Aorigami?source=origami-docs&format=svg" sizes="any"><link rel="alternate icon" type="image/png" href="https://www.ft.com/__origami/service/image/v2/images/raw/ftlogo-v1%3Aorigami?source=origami-docs&width=16&height=16&format=png" sizes="16x16"><link rel="alternate icon" type="image/png" href="https://www.ft.com/__origami/service/image/v2/images/raw/ftlogo-v1%3Aorigami?source=origami-docs&width=32&height=32&format=png" sizes="32x32"><link rel="alternate icon" type="image/png" href="https://www.ft.com/__origami/service/image/v2/images/raw/ftlogo-v1%3Aorigami?source=origami-docs&width=96&height=96&format=png" sizes="96x96"><link rel="alternate icon" type="image/png" href="https://www.ft.com/__origami/service/image/v2/images/raw/ftlogo-v1%3Aorigami?source=origami-docs&width=128&height=128&format=png" sizes="128x128"><link rel="alternate icon" type="image/png" href="https://www.ft.com/__origami/service/image/v2/images/raw/ftlogo-v1%3Aorigami?source=origami-docs&width=196&height=196&format=png" sizes="196x196"><link rel="alternate icon" type="image/png" href="https://www.ft.com/__origami/service/image/v2/images/raw/ftlogo-v1%3Aorigami?source=origami-docs&width=310&height=310&format=png" sizes="310x310"><!-- Site links --><link rel="sitemap" type="application/xml" href="/sitemap-index.xml" title="Sitemap"><link rel="canonical" href="https://origami.ft.com/documentation/components/versioning/"><!-- Progressive Font Loading --><!-- https://github.com/Financial-Times/o-typography/tree/v6.1.3#setup-progressive-loading --><!-- Styles --><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="https://www.ft.com/__origami/service/build/v3/bundles/css?components=o-layout@^5.3.2,o-typography@^7.4.1,o-normalise@^3.3.1,o-header-services@^5.3.4,o-footer-services@^4.2.6,o-message@^5.4.2,o-table@^9.3.1,o-autoinit@^3.1.3,o-forms@^9.11.2,o-tracking@^4.5.0,o-colors@^6.6.2,o-spacing@^3.2.3&#38;brand=internal&#38;system_code=origami-website"><!-- JS --><script defer src="https://www.ft.com/__origami/service/build/v3/bundles/js?components=o-layout@^5.3.2,o-typography@^7.4.1,o-normalise@^3.3.1,o-header-services@^5.3.4,o-footer-services@^4.2.6,o-message@^5.4.2,o-table@^9.3.1,o-autoinit@^3.1.3,o-forms@^9.11.2,o-tracking@^4.5.0&#38;system_code=origami-website"></script><script defer src="/assets/tracking.js"></script><link rel="stylesheet" href="/_astro/404.93bfcc51.css" />
<link rel="stylesheet" href="/_astro/RacingBars.0a6fad8c.css" /><script type="module">var o=document.querySelector("html");if(/(^|\s)o-typography-fonts-loaded=1(;|$)/.test(document.cookie))for(var a=["sans","sans-bold","display","display-bold"],e=0;e<a.length;e++)o.className=o.className.replace("o-typography--loading-"+a[e],"");var t="querySelector"in document&&"localStorage"in window&&"addEventListener"in window;t&&(document.documentElement.className=document.documentElement.className.replace(/\bcore\b/g,"enhanced"));
</script></head><body><div class="o-layout o-layout--docs" data-o-component="o-layout"><div class="o-layout__header"><header class="o-header-services" data-o-component="o-header-services"><div class="o-header-services__top"><div class="o-header-services__hamburger"><a class="o-header-services__hamburger-icon" href="#" role="button"><span class="o-header-services__visually-hidden">Open primary navigation</span></a></div><a href="/" class="o-header-services__logo"><span class="o-header-services__visually-hidden">To homepage</span></a><div class="o-header-services__title"><a class="o-header-services__product-name" href="/">Origami</a><span class="o-header-services__product-tagline">Frontend Components &amp; Services</span></div></div><nav class="o-header-services__primary-nav" aria-label="primary"><ul class="o-header-services__primary-nav-list"><li><a href="/">Home</a></li><li><a href="/documentation/">Documentation</a></li><li><a href="/storybook/">Storybook</a></li><li><a href="/blog/">Blog</a></li></ul></nav><nav class="o-header-services__secondary-nav" aria-label="secondary" data-o-header-services-nav=""><div class="o-header-services__secondary-nav-content" data-o-header-services-nav-list=""><ol class="o-header-services__secondary-nav-list o-header-services__secondary-nav-list--ancestors" aria-label="Ancestor sections"><li><a href="/documentation/">Documentation</a></li><li><a href="/documentation/components/">Components</a></li></ol><ul class="o-header-services__secondary-nav-list o-header-services__secondary-nav-list--children" aria-label="Child sections"><li><a href="/documentation/components/getting-started/">Getting Started</a></li><li><a href="/documentation/components/brand-definitions/">Brands &amp; Themes</a></li><li><a href="/documentation/components/customisation/">Customisation</a></li><li><a href="/documentation/components/code/">Code</a></li><li><a aria-current="page" href="/documentation/components/versioning/">Versioning</a></li><li><a href="/documentation/components/compatibility/">Compatibility</a></li><li><a href="/documentation/components/contributing/">Contributing</a></li></ul></div><button class="o-header-services__scroll-button o-header-services__scroll-button--left" title="scroll left" aria-hidden="true" disabled></button><button class="o-header-services__scroll-button o-header-services__scroll-button--right" title="scroll right" aria-hidden="true" disabled></button></nav></header></div><div class="o-layout__sidebar"></div><div class="o-layout__main o-layout-typography"><h1 id="component-versioning">Component versioning</h1>
<p>The Origami team maintains and improves the components regularly. This means that we release new versions of the components frequently, and a component’s new version numbers follow the <abbr title="Semantic Versioning">semver</abbr> specification.</p>
<aside>You can find more information in the <a href="http://semver.org/"><abbr title="Semantic Versioning">semver</abbr> specification</a></aside>
<h2 id="how-components-are-versioned">How components are versioned</h2>
<p>The version numbers are in the following format: <code>1.2.3</code>, which is representative of <code>MAJOR.MINOR.PATCH</code>.</p>
<ul>
<li><code>MAJOR</code>: When a major is released, we refer to it as a breaking change. This usually means that we have made a drastic visual change, or a change that breaks backwards compatibility. When this changes, we will communicate the change and offer help with migration.</li>
<li><code>MINOR</code>: When this number changes , we’ll have made an improvement, added a feature or made a noticeable design tweak, for example.</li>
<li><code>PATCH</code>: When we release patches, we are usually releasing a bug fix that does not affect the components overall functionality.</li>
</ul>
<h2 id="how-to-request-a-versioned-component">How to request a versioned component</h2>
<p>We recommend requesting an Origami component by requesting a particular version range, which is indicated by a caret (<code>^</code>). That syntax will specify a version but will also fetch minor and patch releases in the future. So if you request <code>o-message@^2.3.0</code>, you will get <code>v2.3.0</code>. But when we release a minor (<code>v2.4.0</code>) of that component further down the line, it means you’ll automatically get that, too.</p>
<aside>With <abbr title="Semantic Versioning">semver</abbr> you can use different characters to <a href="https://semver.npmjs.com/">specify different ranges</a></aside>
<p>By requesting a component’s version range, you’ll have an up-to-date component as soon as we release it.</p>
<h2 id="version-conflicts">Version conflicts</h2>
<p>Almost all Origami components are built on top of other Origami components.</p>
<p><a href="https://registry.origami.ft.com/components/o-message">o-message</a>, for example, relies on <a href="https://registry.origami.ft.com/components/o-message">o-buttons</a>, <a href="https://registry.origami.ft.com/components/o-colors">o-colors</a>, <a href="https://registry.origami.ft.com/components/o-icons">o-icons</a> and <a href="https://registry.origami.ft.com/components/o-typography">o-typography</a>, which in turn have Origami dependencies of their own, which generates an elaborate dependency tree:</p>
<pre><code class="o-syntax-highlight--bash">o-message
├── o-buttons
│   ├── o-colors
│   ├── o-icons
│   │   ├── fticons
│   │   └── o-assets
│   └── o-normalise
│       └── o-colors
├── o-colors
├── o-icons
│   ├── fticons
│   └── o-assets
└── o-typography
    ├── o-colors
    ├── o-fonts
    ├── o-grid
    └── o-icons
        ├── fticons
        └── o-assets</code></pre>
<p>Let’s use <code>o-colors</code> as an example.</p>
<p>The full <code>o-message</code> dependency tree requires <code>o-colors</code> <strong>four</strong> times. In order to avoid downloading four different versions of <code>o-colors</code>, we will flatten the dependencies and try to find a version of <code>o-colors</code> that all of the components requiring it can use. This is possible because <a href="#how-to-request-a-versioned-component">Origami components use <abbr title="Semantic Versioning">semver</abbr> ranges</a> to specify the versions of their dependencies.</p>
<p>However, this can also lead to situations where there is no single version that satisfies all <abbr title="Semantic Versioning">semver</abbr> ranges. This happens primarily when different ranges for the same component are specified.</p>
<p>If, for instance, <code>o-message</code> requires <code>o-colors@^2.3.4</code>, it will be compatible with any version between <code>v2.3.4</code> and below <code>v3.0.0</code>.</p>
<p>If the <code>o-typography</code> dependency required <code>o-colors@^1.2.3</code>, any version above and including <code>o-colors@2.0.0</code> won’t be compatible with the direct <code>o-colors</code> dependency (which is <code>v2.3.4</code> and above), and will cause a conflict.</p>
<p>The only way to fix these conflicts is to ensure that the dependencies and the dependencies within those dependencies are all requiring the <strong>same ranges</strong>.</p>
<h2 id="releasing">Releasing</h2>
<h3 id="plan-for-and-communicate-a-release">Plan for and communicate a release</h3>
<p>Releasing a new version of a component impacts other projects and teams, as updates may be needed to projects which consume the component .</p>
<p>Before releasing a new major version of a component, notify maintainers of dependent projects. This allows time for feedback and for teams to plan for the migration from one major version to another. This <a href="/documentation/components/major-cascade/">migration process can be complex</a>, especially when making a major change to a component which is widely used across many other components and end products. It is therefore important to plan for a release and communicate with stakeholders ahead of time.</p>
<p>For minor or patch releases, notify maintainers of dependent projects to encourage adoption of the new fix or feature. A Slack message, blog post, or newsletter is a good way to do this.</p>
<h3 id="decide-what-version-to-release">Decide what version to release</h3>
<ul>
<li><code>MAJOR</code>:
<ul>
<li>Breaking change (i.e. API change which is not backward compatible).</li>
<li>Significant visual change which may require action from dependent teams.</li>
<li>A new peer dependency or new major version of an existing peer dependency, unless the semver range includes the previous major release (e.g. >=1.2.3 &#x3C;3).</li>
</ul>
</li>
<li><code>MINOR</code>:
<ul>
<li>A new feature.</li>
<li>A noticeable design change.</li>
<li>A minor version bump for a peer dependency.</li>
</ul>
</li>
<li><code>PATCH</code>:
<ul>
<li>A bug fix that does not affect the components overall functionality.</li>
</ul>
</li>
</ul>
<p>When a new <code>MAJOR</code> release affects many dependent components and projects we call this a <a href="/documentation/components/major-cascade/">major cascade</a>. It may require <a href="/documentation/components/major-cascade/">extra consideration and support</a> before release.</p>
<h3 id="deprecate-a-component">Deprecate a component</h3>
<p>Follow these steps to deprecate an existing component:</p>
<ol>
<li>Plan for and communicate a deprecation with users, as outlined above.</li>
<li>Collaborate with design to ensure design tooling is also updated, where a representation of the component exists.</li>
<li>Modify the component’s <code>origami.json</code>, change its <a href="/documentation/manifests/origami-json/#supportstatus">supportStatus</a> to either “dead” or “deprecated” – see the <a href="/documentation/manifests/origami-json/#supportstatus">origami.json manifest specification</a> for a definition of each status.</li>
<li>Update the component’s <code>README.md</code> to include a paragraph at the top, outlining the component’s deprecation status. Explain what any remaining users should do. Link to any replacement.</li>
<li>Make a patch release so Origami services and tooling picks up the updated status and readme.</li>
<li>Disable the Github Issues functionality from the deprecated component’s repository.</li>
<li>Update the Github URL to point towards the replacement’s repository on GitHub, if it exists.</li>
<li>If the component is “dead”, either delete the component’s directory in a mono-repo context or archive the component’s individual Github Repository.</li>
</ol>
<h3 id="deprecate-a-component-feature">Deprecate a component feature</h3>
<ul>
<li>Plan for and communicate a feature deprecation with users, as outlined above.</li>
<li>Collaborate with the design team to ensure the deprecated feature is aligned in design tooling (Figma).</li>
<li>Where practical, move deprecated code into its own file or to a directory called “deprecated”. This way, it will be much easier to work with the new code while maintaining legacy code. It will also be easier to delete when making a future major release. If separating deprecated code into its own deprecated file or directory is not pragmatic, modified code must be appended and prepended with a comment which begins <code>@deprecated</code>, followed by text which describes the deprecation.</li>
<li>Deprecated features should log a warning when used by an engineer, stating is deprecated and offering an alternative when there is one. However, only output a warning if the user can take an action to prevent it. Do not log a warning from a component’s main entry point (e.g. primary Sass mixin), as this may log an error even if the user is not using the deprecated feature.</li>
<li>Note deprecations in the component’s README file.</li>
<li>Create a Jira ticket or Github issue to remember to remove the deprecated feature in a future major release. Label the ticket/issue with the component name.</li>
</ul></div><div class="o-layout__footer"><footer class="o-footer-services"><div class="o-footer-services__container"><div class="o-footer-services__wrapper o-footer-services__wrapper--top"><a class="o-footer-services__icon-link o-footer-services__icon-link--github" href="https://github.com/Financial-Times/origami">View project on GitHub</a><a class="o-footer-services__icon-link o-footer-services__icon-link--github" href="https://github.com/Financial-Times/origami/pulls?q=is%3Apr+is%3Aopen+sort%3Aupdated-desc">View proposals to Origami</a><a class="o-footer-services__icon-link o-footer-services__icon-link--slack" href="https://financialtimes.slack.com/messages/origami-support">#origami-support</a><p class="o-footer-services__content">
Get in touch at <a href="mailto:origami.support@ft.com">origami.support@ft.com</a> for help or advice.
				Feel free to
<a href="https://github.com/Financial-Times/origami/edit/main/apps/website/src/pages/documentation/components/versioning/">suggest an edit to this page</a>.
</p></div></div><div class="o-footer-services__container"><div class="o-footer-services__wrapper o-footer-services__wrapper--legal"><div class="o-footer-services__links"><a href="https://help.ft.com/help/legal-privacy/cookies/">Cookies</a><a href="https://help.ft.com/help/legal-privacy/copyright/copyright-policy/">Copyright</a><a href="https://help.ft.com/help/legal-privacy/privacy/">Privacy</a><a href="https://help.ft.com/help/legal-privacy/terms-conditions">Terms & Conditions</a><a href="https://help.ft.com/legal-privacy/copyright-policy/">Slavery Statement & Policies</a></div><p><span>&copy; THE FINANCIAL TIMES LTD 2024.</span> FT and
				'Financial Times' are trademarks of The Financial Times Ltd.
</p></div></div></footer></div></div></body></html>