<!DOCTYPE html><html lang="en-GB" class="core o-typography--loading-sans o-typography--loading-sans-bold o-typography--loading-display o-typography--loading-display-bold" data-o-component="o-typography"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Compatibility</title><meta name="description" content="Documentation about how Origami ensures compatibility across different browsers and devices, and how you can write code in a way that supports this."><!-- Cuts the mustard test --><!-- Favicons --><link rel="icon" type="image/svg+xml" href="https://www.ft.com/__origami/service/image/v2/images/raw/ftlogo-v1%3Aorigami?source=origami-docs&format=svg" sizes="any"><link rel="alternate icon" type="image/png" href="https://www.ft.com/__origami/service/image/v2/images/raw/ftlogo-v1%3Aorigami?source=origami-docs&width=16&height=16&format=png" sizes="16x16"><link rel="alternate icon" type="image/png" href="https://www.ft.com/__origami/service/image/v2/images/raw/ftlogo-v1%3Aorigami?source=origami-docs&width=32&height=32&format=png" sizes="32x32"><link rel="alternate icon" type="image/png" href="https://www.ft.com/__origami/service/image/v2/images/raw/ftlogo-v1%3Aorigami?source=origami-docs&width=96&height=96&format=png" sizes="96x96"><link rel="alternate icon" type="image/png" href="https://www.ft.com/__origami/service/image/v2/images/raw/ftlogo-v1%3Aorigami?source=origami-docs&width=128&height=128&format=png" sizes="128x128"><link rel="alternate icon" type="image/png" href="https://www.ft.com/__origami/service/image/v2/images/raw/ftlogo-v1%3Aorigami?source=origami-docs&width=196&height=196&format=png" sizes="196x196"><link rel="alternate icon" type="image/png" href="https://www.ft.com/__origami/service/image/v2/images/raw/ftlogo-v1%3Aorigami?source=origami-docs&width=310&height=310&format=png" sizes="310x310"><!-- Site links --><link rel="sitemap" type="application/xml" href="/sitemap-index.xml" title="Sitemap"><link rel="canonical" href="https://origami.ft.com/documentation/components/compatibility/"><!-- Progressive Font Loading --><!-- https://github.com/Financial-Times/o-typography/tree/v6.1.3#setup-progressive-loading --><!-- Styles --><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="https://www.ft.com/__origami/service/build/v3/bundles/css?components=o-layout@^5.3.2,o-typography@^7.4.1,o-normalise@^3.3.1,o-header-services@^5.3.4,o-footer-services@^4.2.6,o-message@^5.4.2,o-table@^9.3.1,o-autoinit@^3.1.3,o-forms@^9.11.2,o-tracking@^4.5.0,o-colors@^6.6.2,o-spacing@^3.2.3&#38;brand=internal&#38;system_code=origami-website"><!-- JS --><script defer src="https://www.ft.com/__origami/service/build/v3/bundles/js?components=o-layout@^5.3.2,o-typography@^7.4.1,o-normalise@^3.3.1,o-header-services@^5.3.4,o-footer-services@^4.2.6,o-message@^5.4.2,o-table@^9.3.1,o-autoinit@^3.1.3,o-forms@^9.11.2,o-tracking@^4.5.0&#38;system_code=origami-website"></script><script defer src="/assets/tracking.js"></script><link rel="stylesheet" href="/_astro/404.93bfcc51.css" />
<link rel="stylesheet" href="/_astro/RacingBars.0a6fad8c.css" /><script type="module">var o=document.querySelector("html");if(/(^|\s)o-typography-fonts-loaded=1(;|$)/.test(document.cookie))for(var a=["sans","sans-bold","display","display-bold"],e=0;e<a.length;e++)o.className=o.className.replace("o-typography--loading-"+a[e],"");var t="querySelector"in document&&"localStorage"in window&&"addEventListener"in window;t&&(document.documentElement.className=document.documentElement.className.replace(/\bcore\b/g,"enhanced"));
</script></head><body><div class="o-layout o-layout--docs" data-o-component="o-layout"><div class="o-layout__header"><header class="o-header-services" data-o-component="o-header-services"><div class="o-header-services__top"><div class="o-header-services__hamburger"><a class="o-header-services__hamburger-icon" href="#" role="button"><span class="o-header-services__visually-hidden">Open primary navigation</span></a></div><a href="/" class="o-header-services__logo"><span class="o-header-services__visually-hidden">To homepage</span></a><div class="o-header-services__title"><a class="o-header-services__product-name" href="/">Origami</a><span class="o-header-services__product-tagline">Frontend Components &amp; Services</span></div></div><nav class="o-header-services__primary-nav" aria-label="primary"><ul class="o-header-services__primary-nav-list"><li><a href="/">Home</a></li><li><a href="/documentation/">Documentation</a></li><li><a href="https://registry.origami.ft.com/components">Registry</a></li><li><a href="/storybook/">Storybook</a></li><li><a href="/blog/">Blog</a></li></ul></nav><nav class="o-header-services__secondary-nav" aria-label="secondary" data-o-header-services-nav=""><div class="o-header-services__secondary-nav-content" data-o-header-services-nav-list=""><ol class="o-header-services__secondary-nav-list o-header-services__secondary-nav-list--ancestors" aria-label="Ancestor sections"><li><a href="/documentation/">Documentation</a></li><li><a href="/documentation/components/">Components</a></li></ol><ul class="o-header-services__secondary-nav-list o-header-services__secondary-nav-list--children" aria-label="Child sections"><li><a href="/documentation/components/getting-started/">Getting Started</a></li><li><a href="/documentation/components/brand-definitions/">Brands &amp; Themes</a></li><li><a href="/documentation/components/customisation/">Customisation</a></li><li><a href="/documentation/components/code/">Code</a></li><li><a href="/documentation/components/versioning/">Versioning</a></li><li><a aria-current="page" href="/documentation/components/compatibility/">Compatibility</a></li><li><a href="/documentation/components/contributing/">Contributing</a></li></ul></div><button class="o-header-services__scroll-button o-header-services__scroll-button--left" title="scroll left" aria-hidden="true" disabled></button><button class="o-header-services__scroll-button o-header-services__scroll-button--right" title="scroll right" aria-hidden="true" disabled></button></nav></header></div><div class="o-layout__sidebar"></div><div class="o-layout__main o-layout-typography"><h1 id="compatibility">Compatibility</h1>
<h2 id="core--enhanced-experiences">Core &#x26; enhanced experiences</h2>
<p><code>core</code> and <code>enhanced</code> are definitions we have for ‘experiences’ that we serve to a browser. The experience we serve depends on the presence of some features within the browser.</p>
<p>Generally, older browsers that don’t support newer JavaScript features will get a <code>core</code> experience, and modern browsers will get the <code>enhanced</code> experience.</p>
<p>To determine whether or not a browser supports those features, we use a ‘cuts the mustard’ test.</p>
<h3 id="cuts-the-mustard">Cuts the mustard</h3>
<aside>This expression comes from the <abbr title="British Broadcasting Corporation">BBC</abbr>'s <a href="http://responsivenews.co.uk/post/18948466399/cutting-the-mustard">post about <abbr title="Cuts The Mustard">CTM</abbr></a></aside>
<h4 id="defining-a-ctm-test">Defining a <abbr title="Cuts The Mustard">CTM</abbr> test</h4>
<p>This test checks browsers for some features that are only implemented by modern browsers. We recommend the following test:</p>
<pre class="o-layout__main__full-span"><code class="o-syntax-highlight--javascript">var script = document.createElement('script');
var supportsDeferredScripts = "defer" in script &#x26;&#x26; "async" in script;
window.cutsTheMustard = (typeof document.documentElement.dataset === 'object' &#x26;&#x26; ('visibilityState' in document) &#x26;&#x26; supportsDeferredScripts);</code></pre>
<h4 id="toggling-styling">Toggling styling</h4>
<p>The styling we choose to display rely on class names. Keeping with the experiences, we will be using <code>core</code> and <code>enhanced</code>. Origami components contain fallback styling for the browsers that fail the test. We need to toggle the class names based on the result of the test, and to avoid flashes of content we’ll always assume that the experience we will be served is core, until proven otherwise.</p>
<p>Your <code>&#x3C;html></code> will need the <code>core</code> class:</p>
<pre><code class="o-syntax-highlight--html">&#x3C;html class="core"></code></pre>
<p>And we’ll want to add a script to replace that class with <code>enhanced</code> if the browser <em>does</em> pass the test:</p>
<pre><code class="o-syntax-highlight--javascript">if (window.cutsTheMustard) {
	document.documentElement.classList.replace('core', 'enhanced');
}</code></pre>
<p>Finally, we need to add instructions for our styling to handle the html class:</p>
<pre><code class="o-syntax-highlight--css">.core .o--if-js,
.enhanced .o--if-no-js {
	display: none !important;
}</code></pre>
<h4 id="loading-javascript-asynchronously">Loading JavaScript asynchronously</h4>
<p>If our browser passes the test and there is JavaScript that should only be served for the <code>enhanced</code> experience, we can load the JavaScript dynamically.</p>
<p>If there is JavaScript to execute regardless of the experience served to the browser, we should add a <code>&#x3C;script></code> element to load that JavaScript.</p>
<pre><code class="o-syntax-highlight--javascript">&#x3C;script>
	(function(src) {
		if (window.cutsTheMustard) {
			script.async = script.defer = true;
			script.src = src;
			var s = document.getElementsByTagName('script')[0];
			s.parentNode.insertBefore(script, s);
		}
	}('https://example.com/main.js));
&#x3C;/script></code></pre>
<aside>We've put the full implementation of our <abbr title="Cuts The Mustard">CTM</abbr> test <a href="https://codepen.io/ft-origami/pen/rZjzbw">on Codepen</a></aside>
<h2 id="browser-support">Browser support</h2>
<p>Origami follow the <a href="https://docs.google.com/document/d/1z6kecy_o9qHYIznTmqQ-IJqre72jhfd0nVa4JMsS7Q4/"><abbr title="Financial Times">FT</abbr> Browser Support Policy document</a> available to <abbr title="Financial Times">FT</abbr> staff.</p></div><div class="o-layout__footer"><footer class="o-footer-services"><div class="o-footer-services__container"><div class="o-footer-services__wrapper o-footer-services__wrapper--top"><a class="o-footer-services__icon-link o-footer-services__icon-link--github" href="https://github.com/Financial-Times/origami">View project on GitHub</a><a class="o-footer-services__icon-link o-footer-services__icon-link--github" href="https://github.com/Financial-Times/origami/pulls?q=is%3Apr+is%3Aopen+sort%3Aupdated-desc">View proposals to Origami</a><a class="o-footer-services__icon-link o-footer-services__icon-link--slack" href="https://financialtimes.slack.com/messages/origami-support">#origami-support</a><p class="o-footer-services__content">
Get in touch at <a href="mailto:origami.support@ft.com">origami.support@ft.com</a> for help or advice.
				Feel free to
<a href="https://github.com/Financial-Times/origami/edit/main/apps/website/src/pages/documentation/components/compatibility/">suggest an edit to this page</a>.
</p></div></div><div class="o-footer-services__container"><div class="o-footer-services__wrapper o-footer-services__wrapper--legal"><div class="o-footer-services__links"><a href="https://help.ft.com/help/legal-privacy/cookies/">Cookies</a><a href="https://help.ft.com/help/legal-privacy/copyright/copyright-policy/">Copyright</a><a href="https://help.ft.com/help/legal-privacy/privacy/">Privacy</a><a href="https://help.ft.com/help/legal-privacy/terms-conditions">Terms & Conditions</a><a href="https://help.ft.com/legal-privacy/copyright-policy/">Slavery Statement & Policies</a></div><p><span>&copy; THE FINANCIAL TIMES LTD 2024.</span> FT and
				'Financial Times' are trademarks of The Financial Times Ltd.
</p></div></div></footer></div></div></body></html>